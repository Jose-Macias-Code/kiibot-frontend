(function(){"use strict";var e={1264:function(e){e.exports="data:image/webp;base64,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"},4710:function(e,s,a){var t=a(3751),o=a(641);function i(e,s,a,t,i,l){const n=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.Wv)(n)}var l={name:"App"},n=a(6262);const r=(0,n.A)(l,[["render",i]]);var d=r,c=a(5220),u=a(33);const h={class:"login-container"},m={key:0,class:"error-message"},p=["type"],f={key:1,class:"error-message"},g=["disabled"],v={key:0},k={key:1,class:"loading-spinner"},b={key:0,class:"general-error-message"};function w(e,s,a,i,l,n){return(0,o.uX)(),(0,o.CE)("div",h,[s[8]||(s[8]=(0,o.Fv)('<h1 class="login-title" data-v-6bdb23c1>¡Bienvenido(a) de nuevo!</h1><p class="login-subtitle" data-v-6bdb23c1>Por favor, inicia sesión para continuar.</p><div class="cred-tooltip" data-v-6bdb23c1><i class="fas fa-info-circle" data-v-6bdb23c1></i><div class="tooltip-content" data-v-6bdb23c1><strong data-v-6bdb23c1>Credenciales de prueba:</strong><br data-v-6bdb23c1> Correo: <code data-v-6bdb23c1>admin@gmail.com</code><br data-v-6bdb23c1> Contraseña: <code data-v-6bdb23c1>123456</code></div></div>',3)),(0,o.Lk)("form",{onSubmit:s[7]||(s[7]=(0,t.D$)(((...e)=>n.handleLogin&&n.handleLogin(...e)),["prevent"]))},[(0,o.Lk)("div",{class:(0,u.C4)(["input-group",{"error-border":l.emailError}])},[(0,o.bo)((0,o.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":s[0]||(s[0]=e=>l.email=e),onFocus:s[1]||(s[1]=e=>l.focusedField="email"),onBlur:s[2]||(s[2]=(...e)=>n.validateEmail&&n.validateEmail(...e))},null,544),[[t.Jo,l.email]]),(0,o.Lk)("label",{class:(0,u.C4)({active:"email"===l.focusedField||l.email,"error-label":l.emailError}),for:"email"}," Dirección de correo electrónico0* ",2)],2),l.emailError?((0,o.uX)(),(0,o.CE)("p",m,(0,u.v_)(l.emailError),1)):(0,o.Q3)("",!0),(0,o.Lk)("div",{class:(0,u.C4)(["input-group",{"error-border":l.passwordError}])},[(0,o.bo)((0,o.Lk)("input",{type:l.showPassword?"text":"password",id:"password","onUpdate:modelValue":s[3]||(s[3]=e=>l.password=e),onFocus:s[4]||(s[4]=e=>l.focusedField="password"),onBlur:s[5]||(s[5]=(...e)=>n.validatePassword&&n.validatePassword(...e))},null,40,p),[[t.hp,l.password]]),(0,o.Lk)("label",{class:(0,u.C4)({active:"password"===l.focusedField||l.password,"error-label":l.passwordError}),for:"password"}," Contraseña* ",2),(0,o.Lk)("i",{class:(0,u.C4)([l.showPassword?"fas fa-eye":"fas fa-eye-slash","toggle-password"]),onClick:s[6]||(s[6]=(...e)=>n.togglePassword&&n.togglePassword(...e))},null,2)],2),l.passwordError?((0,o.uX)(),(0,o.CE)("p",f,(0,u.v_)(l.passwordError),1)):(0,o.Q3)("",!0),(0,o.Lk)("button",{type:"submit",class:"login-button",disabled:l.isLocked},[l.isLocked?((0,o.uX)(),(0,o.CE)("span",k)):((0,o.uX)(),(0,o.CE)("span",v,"Iniciar sesión"))],8,g)],32),(0,o.bF)(t.eB,{name:"fade"},{default:(0,o.k6)((()=>[l.errorMessage?((0,o.uX)(),(0,o.CE)("p",b,(0,u.v_)(l.errorMessage),1)):(0,o.Q3)("",!0)])),_:1})])}a(4114);const L={email:"admin@gmail.com",password:"123456",name:"Jose",role:"admin",profile_photo:"https://i.pravatar.cc/150?img=3"};var C={name:"LoginForm",data(){return{email:"",password:"",focusedField:"",emailError:"",passwordError:"",showPassword:!1,errorMessage:"",isLocked:!1}},methods:{validateEmail(){this.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)?this.emailError="":this.emailError="Ingresa un correo válido.":this.emailError="El correo no puede estar vacío."},validatePassword(){this.password.trim()?this.password.length<6?this.passwordError="La contraseña debe tener al menos 6 caracteres.":this.passwordError="":this.passwordError="La contraseña no puede estar vacía."},async handleLogin(){this.validateEmail(),this.validatePassword(),this.emailError||this.passwordError||(this.isLocked=!0,setTimeout((()=>{this.email===L.email&&this.password===L.password?(localStorage.setItem("token","token-123456"),localStorage.setItem("role",L.role),localStorage.setItem("name",L.name),localStorage.setItem("email",L.email),localStorage.setItem("profile_photo",L.profile_photo),this.$router.push("/chat/new")):(this.errorMessage="Credenciales incorrectas.",setTimeout((()=>this.errorMessage=""),2500)),this.isLocked=!1}),800))},togglePassword(){this.showPassword=!this.showPassword},handleTokenExpired(){this.errorMessage="Sesión expirada. Por favor, inicia sesión nuevamente."}},mounted(){window.addEventListener("token-expired",this.handleTokenExpired)},beforeUnmount(){window.removeEventListener("token-expired",this.handleTokenExpired)}};const y=(0,n.A)(C,[["render",w],["__scopeId","data-v-6bdb23c1"]]);var E=y;const M={class:"main-layout"},I={key:1,class:"modal-overlay"},x={class:"modal-content"};function F(e,s,a,i,l,n){const r=(0,o.g2)("SidebarView"),d=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",M,[l.isSidebarOpen&&l.isMobile?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"sidebar-backdrop",onClick:s[0]||(s[0]=(...e)=>n.toggleSidebar&&n.toggleSidebar(...e))})):(0,o.Q3)("",!0),(0,o.bF)(r,{isSidebarOpen:l.isSidebarOpen,onToggleSidebar:n.toggleSidebar},null,8,["isSidebarOpen","onToggleSidebar"]),(0,o.Lk)("div",{class:(0,u.C4)(["content",{expanded:!l.isSidebarOpen}])},[(0,o.bF)(d,null,{default:(0,o.k6)((({Component:e})=>[(0,o.bF)(t.eB,{name:"slide-fade-page",mode:"out-in"},{default:(0,o.k6)((()=>[((0,o.uX)(),(0,o.Wv)((0,o.$y)(e)))])),_:2},1024)])),_:1})],2),l.showSessionExpiredModal?((0,o.uX)(),(0,o.CE)("div",I,[(0,o.Lk)("div",x,[s[2]||(s[2]=(0,o.Lk)("h2",null,"Sesión Expirada",-1)),s[3]||(s[3]=(0,o.Lk)("p",null,"Tu sesión ha caducado. Por favor, inicia sesión nuevamente.",-1)),(0,o.Lk)("button",{onClick:s[1]||(s[1]=(...e)=>n.redirectToLogin&&n.redirectToLogin(...e)),class:"btn-login-again"},"Iniciar sesión")])])):(0,o.Q3)("",!0)])}const D={class:"top-buttons"},T={class:"chats-list"},S={class:"chat-list-container"},A={class:"chat-list"},P=["onKeyup"],U={key:"text"},X=["onClick"],V={class:"modal-options"},B={class:"bottom-section"},O={class:"profile-container"},R=["src"],W={key:1,class:"fas fa-user-circle default-icon"},_={key:0,class:"admin-panel"};function z(e,s,a,i,l,n){const r=(0,o.g2)("router-link"),d=(0,o.g2)("ConfirmDeleteModal"),c=(0,o.g2)("SearchModal");return(0,o.uX)(),(0,o.CE)("div",null,[a.isSidebarOpen?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:s[0]||(s[0]=(...e)=>n.toggleSidebar&&n.toggleSidebar(...e)),class:"open-sidebar-button","data-tooltip":"Abrir barra lateral"},s[13]||(s[13]=[(0,o.Lk)("i",{class:"fas fa-bars"},null,-1)]))),(0,o.bo)((0,o.Lk)("div",{class:(0,u.C4)(["sidebar",{open:a.isSidebarOpen,closed:!a.isSidebarOpen}])},[(0,o.Lk)("div",D,[(0,o.Lk)("button",{class:"icon-button",onClick:s[1]||(s[1]=(...e)=>n.toggleSidebar&&n.toggleSidebar(...e)),"data-tooltip":"Cerrar barra lateral"},s[14]||(s[14]=[(0,o.Lk)("i",{class:"fas fa-bars"},null,-1)])),s[17]||(s[17]=(0,o.Lk)("div",{class:"spacer"},null,-1)),(0,o.Lk)("button",{class:"icon-button hide-on-mobile",onClick:s[2]||(s[2]=(...e)=>n.openSearchModal&&n.openSearchModal(...e)),"data-tooltip":"Buscar chats"},s[15]||(s[15]=[(0,o.Lk)("i",{class:"fas fa-search"},null,-1)])),(0,o.Lk)("button",{class:"icon-button",onClick:s[3]||(s[3]=(...e)=>n.handleStartNewChat&&n.handleStartNewChat(...e)),"data-tooltip":"Nuevo chat"},s[16]||(s[16]=[(0,o.Lk)("i",{class:"fas fa-plus-circle"},null,-1)]))]),(0,o.Lk)("div",T,[s[18]||(s[18]=(0,o.Lk)("h4",{class:"chats-title"},"CHATS",-1)),(0,o.Lk)("div",S,[(0,o.Lk)("ul",A,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.chats,(a=>((0,o.uX)(),(0,o.CE)("li",{key:a.id,class:(0,u.C4)(["chat-item",{"active-chat":Number(e.$route.params.id)===a.id,"is-editing":l.editingChatId===a.id}])},[(0,o.bF)(r,{to:`/chat/${a.id}`,class:"chat-link",onClick:n.handleSidebarSelect},{default:(0,o.k6)((()=>[(0,o.bF)(t.eB,{name:"scale-fade",mode:"out-in"},{default:(0,o.k6)((()=>[l.editingChatId===a.id?(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:"input","onUpdate:modelValue":s[4]||(s[4]=e=>l.newChatName=e),onKeyup:[(0,t.jR)((e=>n.confirmRename(a)),["enter"]),s[5]||(s[5]=(0,t.jR)(((...e)=>n.cancelRename&&n.cancelRename(...e)),["esc"]))],onBlur:s[6]||(s[6]=(...e)=>n.cancelRename&&n.cancelRename(...e)),class:"rename-input",placeholder:"Nuevo nombre...",autofocus:""},null,40,P)),[[t.Jo,l.newChatName]]):((0,o.uX)(),(0,o.CE)("span",U,(0,u.v_)(a.name),1))])),_:2},1024),(0,o.Lk)("i",{class:"fas fa-ellipsis-h chat-options-icon hide-on-mobile",onClick:(0,t.D$)((e=>null===l.editingChatId&&n.openChatOptions(a.id,e)),["prevent"])},null,8,X)])),_:2},1032,["to","onClick"])],2)))),128))])])]),l.showModal?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"modal-overlay",onClick:s[10]||(s[10]=(...e)=>n.closeModal&&n.closeModal(...e))},[(0,o.Lk)("div",{class:"modal-content",style:(0,u.Tr)({top:l.modalPosition.top+"px",left:l.modalPosition.left+"px"}),onClick:s[9]||(s[9]=(0,t.D$)((()=>{}),["stop"]))},[(0,o.Lk)("ul",V,[(0,o.Lk)("li",{onClick:s[7]||(s[7]=(...e)=>n.renameChat&&n.renameChat(...e))},s[19]||(s[19]=[(0,o.Lk)("i",{class:"fas fa-edit"},null,-1),(0,o.eW)(" Cambiar el nombre ")])),(0,o.Lk)("li",{class:"delete-option",onClick:s[8]||(s[8]=(...e)=>n.deleteChat&&n.deleteChat(...e))},s[20]||(s[20]=[(0,o.Lk)("i",{class:"fas fa-trash-alt delete-icon"},null,-1),(0,o.eW)(" Eliminar ")]))])],4)])):(0,o.Q3)("",!0),(0,o.Lk)("div",B,[(0,o.bF)(r,{to:"/profile",class:"profile-link","data-tooltip":"Perfil",onClick:n.handleSidebarSelect},{default:(0,o.k6)((()=>[(0,o.Lk)("div",O,[l.profileImage?((0,o.uX)(),(0,o.CE)("img",{key:0,src:l.profileImage,alt:"Foto de perfil",class:"profile-image"},null,8,R)):((0,o.uX)(),(0,o.CE)("i",W))])])),_:1},8,["onClick"]),"admin"===l.userRole?((0,o.uX)(),(0,o.CE)("div",_,[(0,o.Lk)("button",{class:"admin-button",onClick:s[11]||(s[11]=(...e)=>n.handleBackofficeClick&&n.handleBackofficeClick(...e))},s[21]||(s[21]=[(0,o.Lk)("i",{class:"fas fa-briefcase"},null,-1),(0,o.eW)(),(0,o.Lk)("p",null,"Office",-1)]))])):(0,o.Q3)("",!0)])],2),[[t.aG,!0]]),l.showConfirmDelete?((0,o.uX)(),(0,o.Wv)(d,{key:1,"chat-id":l.chatToDelete,"chat-name":n.getChatNameById(l.chatToDelete),onConfirmDelete:n.handleConfirmedDelete,onCancelDelete:n.handleCancelDelete},null,8,["chat-id","chat-name","onConfirmDelete","onCancelDelete"])):(0,o.Q3)("",!0),l.showSearchModal?((0,o.uX)(),(0,o.Wv)(c,{key:2,onClose:s[12]||(s[12]=e=>l.showSearchModal=!1),chats:l.chats},null,8,["chats"])):(0,o.Q3)("",!0)])}a(8111),a(2489),a(116);var N=a.p+"img/advertencia.ce48ba0b.webp";const q={class:"modal-overlay"},Q={class:"modal-card"},G={class:"modal-body"},j={class:"modal-text-wrapper"},K={class:"modal-text"},H={class:"modal-actions"};function $(e,s,a,t,i,l){return(0,o.uX)(),(0,o.CE)("div",q,[(0,o.Lk)("div",Q,[s[6]||(s[6]=(0,o.Lk)("p",{class:"modal-title"},"¿Eliminar chat?",-1)),s[7]||(s[7]=(0,o.Lk)("hr",{class:"divider"},null,-1)),(0,o.Lk)("div",G,[(0,o.Lk)("div",j,[(0,o.Lk)("p",K,[s[2]||(s[2]=(0,o.eW)(" Esto eliminará ")),(0,o.Lk)("strong",null,(0,u.v_)(a.chatName),1),s[3]||(s[3]=(0,o.eW)(". "))]),s[4]||(s[4]=(0,o.Lk)("p",{class:"modal-subtext"},[(0,o.eW)(" Al eliminar este chat, "),(0,o.Lk)("strong",null,"KIIBOT"),(0,o.eW)(" olvidará todo lo aprendido durante esta conversación. Esta acción no se puede deshacer. ")],-1))]),s[5]||(s[5]=(0,o.Lk)("div",{class:"modal-image"},[(0,o.Lk)("img",{src:N,alt:"KIIBOT Adv",loading:"lazy"})],-1))]),(0,o.Lk)("div",H,[(0,o.Lk)("button",{class:"btn-cancel",onClick:s[0]||(s[0]=s=>e.$emit("cancel-delete"))},"Cancelar"),(0,o.Lk)("button",{class:"btn-delete",onClick:s[1]||(s[1]=s=>e.$emit("confirm-delete",a.chatId))},"Eliminar")])])])}var J={name:"ConfirmDeleteModal",props:{chatId:{type:[String,Number],required:!0},chatName:{type:String,required:!0}}};const Y=(0,n.A)(J,[["render",$],["__scopeId","data-v-42f4ba7e"]]);var Z=Y,ee=a.p+"img/buscar.a3ae406b.webp";const se={class:"modal-card"},ae={class:"modal-header"},te={class:"modal-results-container"},oe={key:0,class:"results-list"},ie=["onClick"],le={class:"item-text"},ne={key:1,class:"no-results-container"};function re(e,s,a,i,l,n){return(0,o.uX)(),(0,o.CE)("div",{class:"modal-overlay",onClick:s[3]||(s[3]=(0,t.D$)((s=>e.$emit("close")),["self"]))},[(0,o.bF)(t.eB,{name:"modal-slide",appear:""},{default:(0,o.k6)((()=>[(0,o.Lk)("div",se,[(0,o.Lk)("div",ae,[(0,o.bo)((0,o.Lk)("input",{ref:"searchInput","onUpdate:modelValue":s[0]||(s[0]=e=>l.search=e),type:"text",class:"search-input",placeholder:"Buscar chats...",onInput:s[1]||(s[1]=(...s)=>e.handleSearch&&e.handleSearch(...s))},null,544),[[t.Jo,l.search]]),(0,o.Lk)("button",{class:"close-button",onClick:s[2]||(s[2]=s=>e.$emit("close"))},s[4]||(s[4]=[(0,o.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,o.Lk)("div",te,[n.filteredResults.length>0?((0,o.uX)(),(0,o.CE)("ul",oe,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filteredResults,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.id,class:"result-item",onClick:s=>n.selectResult(e)},[s[5]||(s[5]=(0,o.Lk)("i",{class:"fas fa-comment-alt icon"},null,-1)),(0,o.Lk)("span",le,(0,u.v_)(e.name),1)],8,ie)))),128))])):((0,o.uX)(),(0,o.CE)("div",ne,s[6]||(s[6]=[(0,o.Lk)("img",{src:ee,alt:"Sin resultados",class:"no-results-image",loading:"lazy"},null,-1),(0,o.Lk)("p",{class:"no-results-title"},"Sin coincidencias encontradas",-1),(0,o.Lk)("p",{class:"no-results-subtext"}," Intenta con otro término o revisa la ortografía. A veces una palabra clave puede marcar la diferencia. ",-1)])))])])])),_:1})])}a(1701);var de={name:"SearchModal",props:{modelValue:Boolean,chats:{type:Array,required:!0}},emits:["update:modelValue","close"],data(){return{search:"",results:[{id:2,name:"Fragmento de cliente molesto",type:"fragment"},{id:4,name:"Fragmento importante",type:"fragment"}]}},computed:{filteredResults(){const e=this.search.toLowerCase(),s=this.chats.map((e=>({...e,type:"chat"}))),a=[...s,...this.results];return a.filter((s=>{const a=s.name.toLowerCase().includes(e),t="chat"===s.type;return""===this.search?t:a}))}},mounted(){this.$nextTick((()=>{this.$refs.searchInput?.focus()}))},methods:{closeModal(){this.$emit("update:modelValue",!1),this.search=""},selectResult(e){"chat"===e.type?(this.$emit("close"),this.$router.push(`/chat/${e.id}`)):this.$emit("close")}}};const ce=(0,n.A)(de,[["render",re],["__scopeId","data-v-02981eed"]]);var ue=ce,he=a(7380);const me=(0,he.A)();var pe={components:{ConfirmDeleteModal:Z,SearchModal:ue},props:{isSidebarOpen:{type:Boolean,default:!0}},watch:{"$route.params.id":{immediate:!0,handler(e){this.selectedChatId=Number(e),null!==this.editingChatId&&this.cancelRename()}}},data(){return{chats:[{id:1,name:"Saludo"},{id:2,name:"Marketing"},{id:3,name:"Consultoría"},{id:4,name:"Soporte Técnico"},{id:5,name:"Ventas"}],profileImage:localStorage.getItem("profile_photo")||a(1264),showModal:!1,selectedChatId:null,modalPosition:{top:0,left:0},userRole:null,showConfirmDelete:!1,chatToDelete:null,editingChatId:null,newChatName:"",showSearchModal:!1}},mounted(){document.addEventListener("mousedown",this.handleClickOutside),document.addEventListener("mousedown",this.handleClickOutsideRename),me.on("profile-updated",this.updateProfilePhoto),this.getUserRole()},beforeUnmount(){document.removeEventListener("mousedown",this.handleClickOutside),document.removeEventListener("mousedown",this.handleClickOutsideRename),me.off("profile-updated",this.updateProfilePhoto)},methods:{updateProfilePhoto(e){this.profileImage=e||localStorage.getItem("profile_photo")||a(1264)},getUserRole(){this.userRole=localStorage.getItem("role")||""},toggleSidebar(){this.$emit("toggleSidebar")},openSearchModal(){this.showSearchModal=!0},startNewChat(){this.$router.push("/chat/new")},openChatOptions(e,s){this.selectedChatId=e,this.showModal=!0;const a=s.target.getBoundingClientRect();this.modalPosition={top:a.top+window.scrollY+17,left:a.left+window.scrollX+17}},handleClickOutside(e){const s=this.$el.querySelector(".modal-content");this.showModal&&s&&!s.contains(e.target)&&this.closeModal()},closeModal(){this.showModal=!1,this.selectedChatId=null},shareChat(){console.log("Compartir chat",this.selectedChatId),this.closeModal()},deleteChat(){this.chatToDelete=this.selectedChatId,this.showModal=!1,this.showConfirmDelete=!0},getChatNameById(e){const s=this.chats.find((s=>s.id===e));return s?s.name:""},handleCancelDelete(){this.showConfirmDelete=!1,this.selectedChatId=null},handleConfirmedDelete(e){this.chats=this.chats.filter((s=>s.id!==e)),this.$route.params.id==e&&this.$router.push("/chat/new"),this.showConfirmDelete=!1},startRenaming(e){this.editingChatId=e.id,this.newChatName=e.name,this.showModal=!1},confirmRename(e){const s=this.newChatName.trim();""!==s&&(e.name=s),this.cancelRename()},cancelRename(){this.editingChatId=null,this.newChatName=""},renameChat(){const e=this.chats.find((e=>e.id===this.selectedChatId));e&&this.startRenaming(e),this.closeModal()},handleSidebarSelect(){window.innerWidth<=640&&this.$nextTick((()=>{this.$emit("toggleSidebar")}))},handleStartNewChat(){this.$router.push("/chat/new"),this.handleSidebarSelect()},handleBackofficeClick(){this.$router.push("/backoffice"),this.handleSidebarSelect()},handleClickOutsideRename(e){if(!this.editingChatId)return;const s=this.$el.querySelector(".rename-input");s&&!s.contains(e.target)&&this.cancelRename()}}};const fe=(0,n.A)(pe,[["render",z],["__scopeId","data-v-9e95fc26"]]);var ge=fe,ve={name:"MainLayout",components:{SidebarView:ge},data(){return{isSidebarOpen:!0,showSessionExpiredModal:!1,isMobile:window.innerWidth<=640}},methods:{toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen;const e=window.innerWidth<=640;e&&this.isSidebarOpen?(document.documentElement.style.overflow="hidden",document.body.style.cssText="\n          overflow: hidden !important;\n          touch-action: none;\n          position: fixed;\n          width: 100vw;\n          height: 100dvh;\n        "):(document.documentElement.style.overflow="",document.body.style.cssText="")},handleTokenExpired(){this.showSessionExpiredModal=!0},redirectToLogin(){this.showSessionExpiredModal=!1,this.$router.push("/login")},updateIsMobile(){this.isMobile=window.innerWidth<=640}},mounted(){window.addEventListener("token-expired",this.handleTokenExpired),window.addEventListener("resize",this.updateIsMobile),this.isMobile&&this.isSidebarOpen&&this.toggleSidebar()},beforeUnmount(){window.removeEventListener("token-expired",this.handleTokenExpired),window.removeEventListener("resize",this.updateIsMobile),document.documentElement.style.overflow="",document.body.style.cssText=""}};const ke=(0,n.A)(ve,[["render",F],["__scopeId","data-v-7b85376a"]]);var be=ke,we=a.p+"img/saludo.fb2c6e3d.webp";const Le={class:"profile-page"},Ce={class:"profile-header"},ye={class:"profile-photo"},Ee=["src"],Me={key:0,class:"edit-icon"},Ie={class:"profile-info"},xe={class:"info-row"},Fe=["readonly"],De={key:0,class:"field-error"},Te=["readonly"],Se={key:1,class:"field-error"},Ae={class:"actions"},Pe={class:"metrics-section"},Ue={class:"metric-card"},Xe={class:"metric-card"},Ve={class:"metric-card"},Be={class:"modal-password clean"},Oe={class:"input-group"},Re=["type"],We={class:"input-group"},_e=["type"],ze={key:0,class:"error-text"},Ne={class:"rules-list"},qe=["disabled"],Qe={key:0,class:"fas fa-spinner fa-spin"},Ge=["disabled"],je={key:1,class:"logout-modal-overlay"},Ke={class:"logout-modal"};function He(e,s,a,i,l,n){return(0,o.uX)(),(0,o.CE)("div",Le,[(0,o.Lk)("div",Ce,[(0,o.Lk)("div",ye,[(0,o.Lk)("img",{src:l.profileImage,alt:"Foto de perfil"},null,8,Ee),l.isEditing?((0,o.uX)(),(0,o.CE)("label",Me,[s[16]||(s[16]=(0,o.Lk)("i",{class:"fas fa-camera"},null,-1)),(0,o.Lk)("input",{type:"file",onChange:s[0]||(s[0]=(...e)=>n.updateProfileImage&&n.updateProfileImage(...e)),hidden:""},null,32)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ie,[(0,o.Lk)("div",xe,[(0,o.bo)((0,o.Lk)("input",{readonly:!l.isEditing,"onUpdate:modelValue":s[1]||(s[1]=e=>l.name=e),class:(0,u.C4)(["editable-field",l.nameError&&"invalid"])},null,10,Fe),[[t.Jo,l.name]]),l.nameError&&l.isEditing?((0,o.uX)(),(0,o.CE)("p",De,(0,u.v_)(l.nameError),1)):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{readonly:!l.isEditing,"onUpdate:modelValue":s[2]||(s[2]=e=>l.email=e),class:(0,u.C4)(["editable-field",l.emailError&&"invalid"])},null,10,Te),[[t.Jo,l.email]]),l.emailError&&l.isEditing?((0,o.uX)(),(0,o.CE)("p",Se,(0,u.v_)(l.emailError),1)):(0,o.Q3)("",!0),l.toastMessage?((0,o.uX)(),(0,o.CE)("div",{key:2,class:(0,u.C4)(["toast",l.toastType]),onClick:s[3]||(s[3]=(...e)=>n.closeToast&&n.closeToast(...e))},(0,u.v_)(l.toastMessage),3)):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",Ae,[l.isEditing?((0,o.uX)(),(0,o.CE)("i",{key:1,class:(0,u.C4)(["fas",l.isSaving?"fa-spinner fa-spin":"fa-save"]),onClick:s[5]||(s[5]=(...e)=>n.saveChanges&&n.saveChanges(...e)),title:"Guardar cambios"},null,2)):((0,o.uX)(),(0,o.CE)("i",{key:0,class:"fas fa-pencil-alt",onClick:s[4]||(s[4]=(...e)=>n.toggleEdit&&n.toggleEdit(...e)),title:"Editar perfil"})),(0,o.Lk)("i",{class:"fas fa-key",onClick:s[6]||(s[6]=e=>l.showChangePassword=!0),title:"Cambiar contraseña"}),(0,o.Lk)("i",{class:"fas fa-sign-out-alt",onClick:s[7]||(s[7]=(...e)=>n.handleLogout&&n.handleLogout(...e)),title:"Cerrar sesión"})])]),(0,o.Lk)("div",Pe,[(0,o.Lk)("div",Ue,[s[17]||(s[17]=(0,o.Lk)("i",{class:"fas fa-paper-plane icon"},null,-1)),s[18]||(s[18]=(0,o.Lk)("h3",null,"Mensajes enviados",-1)),(0,o.Lk)("p",null,(0,u.v_)(l.metrics.sentMessages),1)]),(0,o.Lk)("div",Xe,[s[19]||(s[19]=(0,o.Lk)("i",{class:"fas fa-robot icon"},null,-1)),s[20]||(s[20]=(0,o.Lk)("h3",null,"Respondidos por el bot",-1)),(0,o.Lk)("p",null,(0,u.v_)(l.metrics.botReplies),1)]),(0,o.Lk)("div",Ve,[s[21]||(s[21]=(0,o.Lk)("i",{class:"fas fa-comments icon"},null,-1)),s[22]||(s[22]=(0,o.Lk)("h3",null,"Cantidad de chats",-1)),(0,o.Lk)("p",null,(0,u.v_)(l.metrics.totalChats),1)])]),l.showChangePassword?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"modal-overlay",onClick:s[15]||(s[15]=(0,t.D$)(((...e)=>n.closeChangePasswordModal&&n.closeChangePasswordModal(...e)),["self"]))},[(0,o.Lk)("div",Be,[s[29]||(s[29]=(0,o.Lk)("h2",null,"CAMBIAR CONTRASEÑA",-1)),s[30]||(s[30]=(0,o.Lk)("p",{class:"subtext"},"Introduce y confirma tu nueva contraseña",-1)),(0,o.Lk)("div",Oe,[s[23]||(s[23]=(0,o.Lk)("i",{class:"fas fa-lock"},null,-1)),(0,o.bo)((0,o.Lk)("input",{type:l.showNewPassword?"text":"password","onUpdate:modelValue":s[8]||(s[8]=e=>l.newPassword=e),placeholder:"Contraseña"},null,8,Re),[[t.hp,l.newPassword]]),(0,o.Lk)("i",{class:(0,u.C4)([l.showNewPassword?"fas fa-eye-slash":"fas fa-eye","toggle"]),onClick:s[9]||(s[9]=e=>n.togglePassword("new"))},null,2)]),(0,o.Lk)("div",We,[s[24]||(s[24]=(0,o.Lk)("i",{class:"fas fa-lock"},null,-1)),(0,o.bo)((0,o.Lk)("input",{type:l.showConfirmPassword?"text":"password","onUpdate:modelValue":s[10]||(s[10]=e=>l.confirmPassword=e),placeholder:"Repetir contraseña"},null,8,_e),[[t.hp,l.confirmPassword]]),(0,o.Lk)("i",{class:(0,u.C4)([l.showConfirmPassword?"fas fa-eye-slash":"fas fa-eye","toggle"]),onClick:s[11]||(s[11]=e=>n.togglePassword("confirm"))},null,2)]),l.errorMessage?((0,o.uX)(),(0,o.CE)("p",ze,(0,u.v_)(l.errorMessage),1)):(0,o.Q3)("",!0),l.passwordToastMessage?((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,u.C4)(["toast",l.passwordToastType]),onClick:s[12]||(s[12]=(...e)=>n.closePasswordToast&&n.closePasswordToast(...e))},(0,u.v_)(l.passwordToastMessage),3)):(0,o.Q3)("",!0),(0,o.Lk)("ul",Ne,[(0,o.Lk)("li",{class:(0,u.C4)({valid:n.passwordValidations.hasUppercase})},[(0,o.Lk)("i",{class:(0,u.C4)(["fas",n.passwordValidations.hasUppercase?"fa-check-circle":"fa-times-circle"])},null,2),s[25]||(s[25]=(0,o.eW)(" Una letra mayúscula "))],2),(0,o.Lk)("li",{class:(0,u.C4)({valid:n.passwordValidations.hasLowercase})},[(0,o.Lk)("i",{class:(0,u.C4)(["fas",n.passwordValidations.hasLowercase?"fa-check-circle":"fa-times-circle"])},null,2),s[26]||(s[26]=(0,o.eW)(" Una letra minúscula "))],2),(0,o.Lk)("li",{class:(0,u.C4)({valid:n.passwordValidations.minLength})},[(0,o.Lk)("i",{class:(0,u.C4)(["fas",n.passwordValidations.minLength?"fa-check-circle":"fa-times-circle"])},null,2),s[27]||(s[27]=(0,o.eW)(" 8 caracteres como mínimo "))],2),(0,o.Lk)("li",{class:(0,u.C4)({valid:n.passwordValidations.hasNumberOrSpecial})},[(0,o.Lk)("i",{class:(0,u.C4)(["fas",n.passwordValidations.hasNumberOrSpecial?"fa-check-circle":"fa-times-circle"])},null,2),s[28]||(s[28]=(0,o.eW)(" Un número y/o carácter especial "))],2)]),(0,o.Lk)("button",{class:"btn-change",onClick:s[13]||(s[13]=(...e)=>n.changePassword&&n.changePassword(...e)),disabled:l.isChangingPassword},[l.isChangingPassword?((0,o.uX)(),(0,o.CE)("i",Qe)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)("Cambiar contraseña")],64))],8,qe),(0,o.Lk)("button",{class:"btn-cancel",onClick:s[14]||(s[14]=(...e)=>n.closeChangePasswordModal&&n.closeChangePasswordModal(...e)),disabled:l.isChangingPassword}," Cancelar ",8,Ge)])])):(0,o.Q3)("",!0),l.isLoggingOut?((0,o.uX)(),(0,o.CE)("div",je,[(0,o.Lk)("div",Ke,[s[31]||(s[31]=(0,o.Lk)("img",{src:we,alt:"Robot despidiéndose",class:"logout-image",loading:"lazy"},null,-1)),(0,o.Lk)("p",null,"Hasta luego, "+(0,u.v_)(l.name)+" 👋",1)])])):(0,o.Q3)("",!0)])}var $e={name:"ProfileView",data(){return{profileImage:localStorage.getItem("profile_photo")||a(1264),name:localStorage.getItem("name")||"",email:localStorage.getItem("email")||"",isEditing:!1,newPassword:"",confirmPassword:"",showChangePassword:!1,metrics:{sentMessages:356,botReplies:289,totalChats:72},isLoggingOut:!1,showNewPassword:!1,showConfirmPassword:!1,errorMessage:"",nameError:"",emailError:"",isSaving:!1,toastMessage:"",toastType:"",passwordToastMessage:"",passwordToastType:"",isChangingPassword:!1}},computed:{passwordValidations(){const e=this.newPassword;return{hasUppercase:/[A-Z]/.test(e),hasLowercase:/[a-z]/.test(e),hasNumberOrSpecial:/[\d\W]/.test(e),minLength:e.length>=8}}},watch:{showChangePassword(e){document.body.style.overflow=e?"hidden":""}},methods:{toggleEdit(){this.isEditing=!0},async saveChanges(){this.nameError="",this.emailError="",this.isSaving=!0;const e=this.name.trim().length>=3,s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email.trim());e||(this.nameError="El nombre debe tener al menos 3 caracteres."),s||(this.emailError="El correo no es válido."),e&&s?(localStorage.setItem("name",this.name),localStorage.setItem("email",this.email),this.isEditing=!1,this.isSaving=!1,this.showToast("Perfil actualizado exitosamente.","success")):this.isSaving=!1},showToast(e,s="success"){this.toastMessage=e,this.toastType=s,setTimeout((()=>{this.toastMessage="",this.toastType=""}),2e3)},closeToast(){this.toastMessage="",this.toastType=""},async updateProfileImage(e){const s=e.target.files[0];if(s){const e=new FileReader;e.onload=e=>{const s=e.target.result;this.profileImage=s,localStorage.setItem("profile_photo",s),me.emit("profile-updated",s)},e.readAsDataURL(s)}},async changePassword(){const e=this.passwordValidations;e.hasUppercase&&e.hasLowercase&&e.minLength&&e.hasNumberOrSpecial?this.newPassword===this.confirmPassword?(this.isChangingPassword=!0,setTimeout((()=>{this.showPasswordToast("Contraseña cambiada exitosamente.","success"),this.errorMessage="",this.showChangePassword=!1,this.newPassword="",this.confirmPassword="",this.isChangingPassword=!1}),2e3)):this.errorMessage="Las contraseñas no coinciden.":this.errorMessage="Tu contraseña no cumple con los requisitos."},showPasswordToast(e,s="success"){this.passwordToastMessage=e,this.passwordToastType=s,setTimeout((()=>{this.passwordToastMessage="",this.passwordToastType=""}),2500)},closeChangePasswordModal(){this.isChangingPassword||(this.showChangePassword=!1)},closePasswordToast(){this.passwordToastMessage="",this.passwordToastType=""},togglePassword(e){"new"===e&&(this.showNewPassword=!this.showNewPassword),"confirm"===e&&(this.showConfirmPassword=!this.showConfirmPassword)},async handleLogout(){this.isLoggingOut=!0,localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("name"),localStorage.removeItem("email"),localStorage.removeItem("profile_photo"),setTimeout((()=>{this.$router.push("/login")}),2e3)}}};const Je=(0,n.A)($e,[["render",He],["__scopeId","data-v-54ee3f24"]]);var Ye=Je;const Ze={class:"chat-wrapper"},es=["onMouseenter"],ss=["innerHTML"],as=["onKeydown"],ts={class:"edit-actions"},os=["onClick"],is=["onClick"],ls=["onClick"],ns={key:"typing-indicator",class:"chat-bubble bot typing-bubble"},rs={class:"chat-input-fixed"};function ds(e,s,a,i,l,n){const r=(0,o.g2)("MessageInput");return(0,o.uX)(),(0,o.CE)("div",Ze,[(0,o.bF)(t.F,{name:"message-fade",tag:"div",class:"chat-history"},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.flows[l.activeFlowIndex],((e,a)=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,ref_for:!0,ref:a===l.flows[l.activeFlowIndex].length-1?"lastMsg":null,class:(0,u.C4)(["chat-bubble","user"===e.role?"user":"bot"]),onMouseenter:s=>l.hoveredMessageId=e.id,onMouseleave:s[2]||(s[2]=e=>l.hoveredMessageId=null)},[l.editingMessageId!==e.id?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,u.C4)(["bubble-inner","markdown-body","user"===e.role?"with-background":""]),innerHTML:e.versions[e.activeVersion].content},null,10,ss)):((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,u.C4)(["bubble-inner","markdown-body","user"===e.role?"with-background":""])},[(0,o.Lk)("div",{class:"edit-content",contenteditable:"true",ref_for:!0,ref:"editable-"+e.id,onInput:s[0]||(s[0]=e=>n.updateEditingText(e)),onKeydown:(0,t.jR)((0,t.D$)((s=>n.saveEdit(e)),["exact","prevent"]),["enter"])},(0,u.v_)(l.editingText),41,as),(0,o.Lk)("div",ts,[(0,o.Lk)("button",{class:"cancel-btn",onClick:s[1]||(s[1]=(...e)=>n.cancelEdit&&n.cancelEdit(...e))},"Cancelar"),(0,o.Lk)("button",{class:"save-btn",onClick:s=>n.saveEdit(e)},"Enviar",8,os)])],2)),(0,o.bF)(t.eB,{name:"fade-slide"},{default:(0,o.k6)((()=>[l.hoveredMessageId===e.id&&l.editingMessageId!==e.id?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,u.C4)(["message-actions","user"===e.role?"user-actions":"bot-actions"])},[(0,o.Lk)("button",{class:"action-btn hide-on-mobile",title:"Copiar",onClick:s=>n.copyMessage(e)},[(0,o.Lk)("i",{class:(0,u.C4)(l.copiedMessageId===e.id?"fas fa-check":"fas fa-copy")},null,2)],8,is),"user"===e.role?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"action-btn hide-on-mobile",title:"Editar",onClick:s=>n.startEditing(e)},s[4]||(s[4]=[(0,o.Lk)("i",{class:"fas fa-edit"},null,-1)]),8,ls)):(0,o.Q3)("",!0)],2)):(0,o.Q3)("",!0)])),_:2},1024)],42,es)))),128)),(0,o.bF)(t.eB,{name:"fade-in"},{default:(0,o.k6)((()=>[l.isTyping?((0,o.uX)(),(0,o.CE)("div",ns,s[5]||(s[5]=[(0,o.Lk)("div",{class:"dot-container"},[(0,o.Lk)("span",{class:"dot"})],-1)]))):(0,o.Q3)("",!0)])),_:1})])),_:1}),(0,o.bF)(t.eB,{name:"scroll-fade"},{default:(0,o.k6)((()=>[l.showScrollDownButton?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"scroll-to-bottom",onClick:s[3]||(s[3]=(...e)=>n.scrollToBottomSmooth&&n.scrollToBottomSmooth(...e))},s[6]||(s[6]=[(0,o.Lk)("i",{class:"fas fa-arrow-down"},null,-1)]))):(0,o.Q3)("",!0)])),_:1}),(0,o.Lk)("div",rs,[(0,o.bF)(r,{class:"input-existing",onSend:n.handleSendMessage},null,8,["onSend"])])])}a(7588);const cs={class:"message-card"},us={key:0,class:"preview-list"},hs=["src","alt","onClick"],ms=["onClick"],ps={class:"file-details"},fs={class:"file-name"},gs={class:"file-type"},vs=["onClick"],ks={class:"actions-row"},bs={class:"message-actions"},ws={key:0,class:"toast-notification"},Ls={key:0,class:"preview-modal"},Cs={class:"modal-image-container"},ys=["src"];function Es(e,s,a,i,l,n){return(0,o.uX)(),(0,o.CE)("div",{class:(0,u.C4)(["message-input-wrapper",n.routeClass])},[(0,o.Lk)("div",cs,[l.previewImages.length||l.previewFiles.length?((0,o.uX)(),(0,o.CE)("div",us,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.previewImages,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:"img-"+s,class:"preview-image"},[(0,o.Lk)("img",{src:e.src,alt:e.name,onClick:s=>l.previewModal=e.src},null,8,hs),(0,o.Lk)("button",{class:"remove-preview",onClick:e=>n.removePreview(s,"image")},"×",8,ms)])))),128)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.previewFiles,((e,a)=>((0,o.uX)(),(0,o.CE)("div",{key:"file-"+a,class:"preview-file"},[(0,o.Lk)("div",{class:(0,u.C4)(["file-icon",n.getFileColorClass(e.type)])},s[7]||(s[7]=[(0,o.Lk)("i",{class:"fas fa-file-alt"},null,-1)]),2),(0,o.Lk)("div",ps,[(0,o.Lk)("span",fs,(0,u.v_)(e.name),1),(0,o.Lk)("span",gs,(0,u.v_)(e.type||"Documento"),1)]),(0,o.Lk)("button",{class:"remove-preview",onClick:e=>n.removePreview(a,"file")},"×",8,vs)])))),128))])):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("textarea",{ref:"textarea","onUpdate:modelValue":s[0]||(s[0]=e=>l.message=e),onKeydown:s[1]||(s[1]=(0,t.jR)((0,t.D$)(((...e)=>n.handleEnter&&n.handleEnter(...e)),["prevent"]),["enter"])),class:"message-textarea",placeholder:"Pregunta lo que quieras",rows:"1"},null,544),[[t.Jo,l.message]]),(0,o.Lk)("div",ks,[(0,o.Lk)("div",bs,[(0,o.Lk)("button",{class:"bubble-button",onClick:s[2]||(s[2]=(...e)=>n.triggerFileInput&&n.triggerFileInput(...e))},s[8]||(s[8]=[(0,o.Lk)("i",{class:"fas fa-file-upload"},null,-1),(0,o.Lk)("span",null,"Cargar",-1)])),(0,o.Lk)("input",{type:"file",ref:"fileInput",multiple:"",style:{display:"none"},onChange:s[3]||(s[3]=(...e)=>n.handleFileChange&&n.handleFileChange(...e))},null,544),(0,o.Lk)("button",{class:(0,u.C4)(["bubble-button",{active:l.isGeneralMode}]),onClick:s[4]||(s[4]=(...e)=>n.toggleGeneralMode&&n.toggleGeneralMode(...e)),"data-tooltip":"Conocimiento general de Open IA"},s[9]||(s[9]=[(0,o.Lk)("i",{class:"fas fa-brain"},null,-1),(0,o.Lk)("span",null,"Conocimiento OpenAI",-1)]),2)]),(0,o.Lk)("button",{class:"send-icon-button",onClick:s[5]||(s[5]=(...e)=>n.emitMessage&&n.emitMessage(...e)),title:"Enviar mensaje"},s[10]||(s[10]=[(0,o.Lk)("i",{class:"fas fa-arrow-up"},null,-1)]))]),(0,o.bF)(t.eB,{name:"fade-toast"},{default:(0,o.k6)((()=>[l.showToast?((0,o.uX)(),(0,o.CE)("div",ws,(0,u.v_)(l.toastMessage),1)):(0,o.Q3)("",!0)])),_:1})]),(0,o.bF)(t.eB,{name:"fade-toast"},{default:(0,o.k6)((()=>[l.previewModal?((0,o.uX)(),(0,o.CE)("div",Ls,[(0,o.Lk)("div",Cs,[(0,o.Lk)("img",{src:l.previewModal,alt:"Preview grande"},null,8,ys)]),(0,o.Lk)("button",{class:"close-modal-button",onClick:s[6]||(s[6]=e=>l.previewModal=null)},"×")])):(0,o.Q3)("",!0)])),_:1})],2)}var Ms={data(){return{message:"",previewImages:[],previewFiles:[],previewModal:null,showToast:!1,maxFiles:5,toastMessage:"",isGeneralMode:!1}},computed:{routeClass(){return"/chat/new"===this.$route.path?"input-new":"input-existing"}},methods:{handleEnter(e){if(e.shiftKey){const e=this.$refs.textarea,s=e.selectionStart;this.message=this.message.slice(0,s)+"\n"+this.message.slice(s),this.$nextTick((()=>{e.selectionStart=e.selectionEnd=s+1,this.adjustHeight()}))}else this.emitMessage()},emitMessage(){const e=this.message.trim();(e||this.previewImages.length||this.previewFiles.length)&&(this.$emit("send",{text:e,generalMode:this.isGeneralMode,files:[...this.previewImages,...this.previewFiles]}),this.message="",this.previewImages=[],this.previewFiles=[],this.adjustHeight())},toggleGeneralMode(){this.isGeneralMode=!this.isGeneralMode},adjustHeight(){const e=this.$refs.textarea;e.style.height="auto";const s=e.scrollHeight,a=200;e.style.height=s>a?a+"px":s+"px"},triggerFileInput(){this.$refs.fileInput.click()},handleFileChange(e){const s=Array.from(e.target.files),a=this.previewImages.length+this.previewFiles.length+s.length,t=["png","jpg","jpeg","webp","gif","pdf","doc","docx","xls","xlsx","csv","txt","zip","rar"];if(a>this.maxFiles)return this.toastMessage=`Solo puedes subir hasta ${this.maxFiles} archivos.`,this.showToast=!0,setTimeout((()=>{this.showToast=!1}),3e3),void(this.$refs.fileInput.value="");s.forEach((e=>{const s=e.name.split(".").pop().toLowerCase(),a=e.type.startsWith("image/");if(!t.includes(s))return this.toastMessage=`El archivo "${e.name}" no es un tipo permitido.`,this.showToast=!0,void setTimeout((()=>{this.showToast=!1}),3e3);if(a){const s=new FileReader;s.onload=s=>{this.previewImages.push({name:e.name,src:s.target.result})},s.readAsDataURL(e)}else{const a=e.name.replace(/\.[^/.]+$/,"");this.previewFiles.push({name:a,type:`.${s}`})}})),this.$refs.fileInput.value=""},getFileColorClass(e){const s={".pdf":"file-icon-pdf",".doc":"file-icon-word",".docx":"file-icon-word",".xls":"file-icon-excel",".xlsx":"file-icon-excel",".csv":"file-icon-excel",".txt":"file-icon-text",".zip":"file-icon-zip",".rar":"file-icon-zip"};return s[e]||"file-icon-default"},removePreview(e,s){"image"===s?this.previewImages.splice(e,1):"file"===s&&this.previewFiles.splice(e,1)}},watch:{message(){this.$nextTick((()=>this.adjustHeight()))}},mounted(){this.adjustHeight()}};const Is=(0,n.A)(Ms,[["render",Es],["__scopeId","data-v-d864717e"]]);var xs=Is,Fs=a(23),Ds=a(9878),Ts=(a(1732),a(9418)),Ss=a(2130);Fs.xI.setOptions({highlight:function(e){return Ds.A.highlightAuto(e).value}});var As={components:{MessageInput:xs},data(){return{showScrollDownButton:!1,isTyping:!1,hoveredMessageId:null,copiedMessageId:null,editingMessageId:null,editingText:"",activeFlowIndex:0,flows:[[{id:"msg1",role:"user",versions:[{content:"<p>Hola, ¿cómo funciona este sistema?</p>"}],activeVersion:0},{id:"msg2",role:"bot",versions:[{content:"<p>Hola 👋 Este chat te permite enviar mensajes, editarlos y ver el historial de versiones.</p>"}],activeVersion:0},{id:"msg3",role:"user",versions:[{content:"<p>¿Qué tipo de contenido acepta?</p>"}],activeVersion:0},{id:"msg4",role:"bot",versions:[{content:"<p>Puedes escribir texto normal, incluir listas, fragmentos de código y hasta fórmulas matemáticas usando KaTeX.</p>"}],activeVersion:0},{id:"msg5",role:"user",versions:[{content:"<p>¿Y cómo se ve un bloque de código?</p>"}],activeVersion:0},{id:"msg6",role:"bot",versions:[{content:'<pre><div class="code-lang">js</div><code>function saludar(nombre) {\n  return `Hola, ${nombre}!`;\n}</code></pre>'}],activeVersion:0},{id:"msg7",role:"user",versions:[{content:"<p>¿Puedo usar listas?</p>"}],activeVersion:0},{id:"msg8",role:"bot",versions:[{content:"<ul>\n  <li>✅ Sí, listas ordenadas y desordenadas.</li>\n  <li>✅ También puedes usar texto <strong>en negrita</strong> o <em>cursiva</em>.</li>\n</ul>"}],activeVersion:0}]]}},mounted(){document.body.style.overflow="hidden",this.loadMessages(),this.$nextTick((()=>{const e=this.$el.querySelector(".chat-history");e&&e.addEventListener("scroll",(()=>{this.updateScrollButtonVisibility()})),this.scrollToBottomIfUserIsAtBottom(!0)}))},beforeUnmount(){document.body.style.overflow=""},methods:{handleSendMessage({text:e}){const s=this.formatResponseText(e),a=this.flows[this.activeFlowIndex];a.push({id:"msg"+Date.now(),role:"user",versions:[{content:s}],activeVersion:0}),this.isTyping=!0,this.$nextTick((()=>{this.scrollToBottomIfUserIsAtBottom(!0),this.updateScrollButtonVisibility()})),setTimeout((()=>{const s=this.generateFakeBotReply(e),t=this.formatResponseText(s);a.push({id:"msg"+Date.now(),role:"bot",versions:[{content:t}],activeVersion:0}),this.isTyping=!1,this.$nextTick((()=>{this.scrollToBottomIfUserIsAtBottom(),this.updateScrollButtonVisibility(),this.applyEnhancements()}))}),1200)},loadMessages(){this.$nextTick((()=>{this.scrollToBottomIfUserIsAtBottom(!0),this.updateScrollButtonVisibility(),this.applyEnhancements()}))},scrollToBottomIfUserIsAtBottom(e=!1){const s=this.$el.querySelector(".chat-history"),a=this.$refs.lastMsg;if(!s||!a)return;const t=s.scrollHeight-s.scrollTop<=s.clientHeight+10;(e||t)&&(Array.isArray(a)?a[a.length-1].scrollIntoView({behavior:"smooth"}):a.scrollIntoView({behavior:"smooth"}))},scrollToBottomSmooth(){const e=this.$el.querySelector(".chat-history");e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},updateScrollButtonVisibility(){const e=this.$el.querySelector(".chat-history");if(!e)return;const s=e.scrollHeight-e.scrollTop<=e.clientHeight+10;this.showScrollDownButton=!s},formatResponseText(e){e=e.replace(/:::(note|warning)\s+([\s\S]+?):::/g,((e,s,a)=>`<div class="alert ${s}">${Fs.xI.parseInline(a.trim())}</div>`)),e=e.replace(/==(.+?)==/g,"<mark>$1</mark>"),e=e.replace(/~~(.+?)~~/g,"<del>$1</del>"),e=e.replace(/\\\((.+?)\\\)/gs,((e,s)=>{try{return Ss.Ay.renderToString(s,{displayMode:!1})}catch{return`<code>${s}</code>`}})),e=e.replace(/\$\$(.+?)\$\$/gs,((e,s)=>{try{return Ss.Ay.renderToString(s,{displayMode:!0})}catch{return`<pre><code>${s}</code></pre>`}}));const s=Fs.xI.parse(e),a=Ts.A.sanitize(s,{ADD_ATTR:["loading"],ADD_TAGS:["img","math","mi","mo","mn","msup","mrow"]});return a.replace(/<img /g,'<img loading="lazy" ').replace(/<a /g,'<a target="_blank" rel="noopener noreferrer" ')},applyEnhancements(){this.highlightAllCode(),this.labelAllLanguages(),this.addAllCopyButtons()},highlightAllCode(){const e=this.$el.querySelectorAll("pre code");e.forEach((e=>{const s=Ds.A.highlightAuto(e.innerText);e.innerHTML=s.value}))},labelAllLanguages(){const e={arcade:"js",isbl:"py",xml:"html",csharp:"java",haskell:"bash",n1ql:"sql"},s=this.$el.querySelectorAll("pre");s.forEach((s=>{const a=s.querySelector("code");if(!a||s.querySelector(".code-lang"))return;const t=Ds.A.highlightAuto(a.innerText),o=t.language||"text",i=e[o.toLowerCase()]||o.toLowerCase(),l=document.createElement("div");l.className="code-lang",l.innerText=i,s.insertBefore(l,a)}))},addAllCopyButtons(){const e=this.$el.querySelectorAll("pre");e.forEach((e=>{const s=e.querySelector("code");if(!s||e.querySelector(".copy-btn"))return;const a=document.createElement("button");a.className="copy-btn",a.innerHTML='<i class="fas fa-copy"></i>',a.title="copiar",a.addEventListener("click",(()=>{navigator.clipboard.writeText(s.innerText).then((()=>{a.innerHTML='<i class="fas fa-check"></i>',setTimeout((()=>a.innerHTML='<i class="fas fa-copy"></i>'),1500)}))})),e.style.position="relative",e.appendChild(a)}))},copyMessage(e){try{const s=e.versions?.[e.activeVersion]?.content||e.content||"";console.log("Intentando copiar:",s);const a=document.createElement("div");a.innerHTML=s;const t=a.innerText;navigator.clipboard.writeText(t).then((()=>{console.log("Texto copiado:",t),this.copiedMessageId=e.id,setTimeout((()=>{this.copiedMessageId=null}),500)})).catch((e=>{console.error("Error al copiar al portapapeles:",e)}))}catch(s){console.error("Excepción inesperada en copyMessage:",s)}},startEditing(e){this.editingMessageId=e.id;const s=document.createElement("div");s.innerHTML=e.versions[e.activeVersion].content,this.editingText=s.innerText},saveEdit(e){const s=this.formatResponseText(this.editingText);e.versions.push({content:s}),e.activeVersion=e.versions.length-1,this.cancelEdit(),this.cutAfter(e)},cancelEdit(){this.editingMessageId=null,this.editingText=""},updateEditingText(e){this.editingText=e.target.innerText},previousVersion(e){if(e.activeVersion>0){const s=this.flows[this.activeFlowIndex],a=s.findIndex((s=>s.id===e.id));if(-1===a)return;const t=JSON.parse(JSON.stringify(s.slice(0,a))),o={...s[a]};o.activeVersion--,t.push(o);const i=s[a+1];if(i&&"bot"===i.role){const e={...i};e.versions.length>o.activeVersion&&(e.activeVersion=o.activeVersion),t.push(e)}this.flows.push(t),this.activeFlowIndex=this.flows.length-1}},nextVersion(e){if(e.activeVersion<e.versions.length-1){const s=this.flows[this.activeFlowIndex],a=s.findIndex((s=>s.id===e.id));if(-1===a)return;const t=JSON.parse(JSON.stringify(s.slice(0,a))),o={...s[a]};o.activeVersion++,t.push(o);const i=s[a+1];if(i&&"bot"===i.role){const e={...i};e.versions.length>o.activeVersion&&(e.activeVersion=o.activeVersion),t.push(e)}this.flows.push(t),this.activeFlowIndex=this.flows.length-1}},cutAfter(e){const s=this.flows[this.activeFlowIndex],a=s.findIndex((s=>s.id===e.id));-1!==a&&(this.flows[this.activeFlowIndex]=s.slice(0,a+1))}}};const Ps=(0,n.A)(As,[["render",ds],["__scopeId","data-v-04c18ae1"]]);var Us=Ps;const Xs={class:"dashboard-container"},Vs={class:"options-container"};function Bs(e,s){return(0,o.uX)(),(0,o.CE)("div",Xs,[s[8]||(s[8]=(0,o.Fv)('<header class="header-container" data-v-52f51f64><div class="header-image" data-v-52f51f64><img src="'+we+'" alt="KIIBOT Logo" loading="lazy" data-v-52f51f64></div><div class="header-text" data-v-52f51f64><h1 data-v-52f51f64>Bienvenido al Panel de <span class="highlight" data-v-52f51f64>KIIBOT</span></h1><p data-v-52f51f64> Gestiona y supervisa todas las funciones de KIIBOT de manera rápida y eficiente. <br data-v-52f51f64><strong data-v-52f51f64>Optimiza y mantén KIIBOT siempre actualizado.</strong></p></div></header>',1)),(0,o.Lk)("section",Vs,[(0,o.Lk)("div",{class:"section-box",onClick:s[0]||(s[0]=s=>e.$router.push("/users"))},s[4]||(s[4]=[(0,o.Lk)("div",{class:"box-header"},[(0,o.Lk)("i",{class:"fas fa-users"}),(0,o.Lk)("span",null,"Usuarios")],-1),(0,o.Lk)("p",{class:"box-description"}," Administra los usuarios registrados en el sistema. Puedes ver, editar, eliminar y asignar roles según los permisos necesarios. ",-1)])),(0,o.Lk)("div",{class:"section-box",onClick:s[1]||(s[1]=s=>e.$router.push("/metrics"))},s[5]||(s[5]=[(0,o.Lk)("div",{class:"box-header"},[(0,o.Lk)("i",{class:"fas fa-chart-line"}),(0,o.Lk)("span",null,"Métricas")],-1),(0,o.Lk)("p",{class:"box-description"}," Consulta estadísticas sobre la actividad de KIIBOT, incluyendo el número de conversaciones activas, tiempo de respuesta, etc etc. ",-1)])),(0,o.Lk)("div",{class:"section-box",onClick:s[2]||(s[2]=s=>e.$router.push("/documents"))},s[6]||(s[6]=[(0,o.Lk)("div",{class:"box-header"},[(0,o.Lk)("i",{class:"fas fa-folder-open"}),(0,o.Lk)("span",null,"Documentos")],-1),(0,o.Lk)("p",{class:"box-description"}," Gestiona los archivos que alimentan la base de conocimiento de KIIBOT. Sube nuevos documentos y actualiza información ",-1)])),(0,o.Lk)("div",{class:"section-box",onClick:s[3]||(s[3]=s=>e.$router.push("/embeddings"))},s[7]||(s[7]=[(0,o.Lk)("div",{class:"box-header"},[(0,o.Lk)("i",{class:"fas fa-brain"}),(0,o.Lk)("span",null,"Base de Conocimiento")],-1),(0,o.Lk)("p",{class:"box-description"}," Edita y gestiona los fragmentos de conocimiento que usa KIIBOT para responder con precisión. ",-1)]))])])}const Os={},Rs=(0,n.A)(Os,[["render",Bs],["__scopeId","data-v-52f51f64"]]);var Ws=Rs;const _s={class:"user-management-container"},zs={class:"user-header"},Ns={class:"header-row"},qs={class:"header-filters"},Qs={key:0,class:"loading-spinner"},Gs={key:1,class:"user-table"},js={class:"user-box"},Ks=["src"],Hs={class:"user-text"},$s={class:"name"},Js={class:"email"},Ys={class:"last-access"},Zs=["title"],ea=["onClick"],sa={key:2,class:"empty-state"},aa={key:3,class:"toast-message"};function ta(e,s,i,l,n,r){const d=(0,o.g2)("UserActionsModal"),c=(0,o.g2)("AddUserModal");return(0,o.uX)(),(0,o.CE)("div",_s,[(0,o.Lk)("div",zs,[(0,o.Lk)("div",Ns,[s[5]||(s[5]=(0,o.Lk)("h2",{class:"header-title"},[(0,o.eW)("Usuarios "),(0,o.Lk)("span",{class:"txt-blue"},"KIIBOT")],-1)),(0,o.Lk)("button",{onClick:s[0]||(s[0]=(...e)=>r.openAddUserModal&&r.openAddUserModal(...e)),class:"add-user-btn"},s[4]||(s[4]=[(0,o.Lk)("i",{class:"fas fa-user-plus"},null,-1),(0,o.eW)(" Añadir Usuario ")]))]),(0,o.Lk)("div",qs,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>n.searchQuery=e),type:"text",placeholder:"Buscar por nombre, correo o id ...",class:"filter-input"},null,512),[[t.Jo,n.searchQuery]])])]),n.isLoading?((0,o.uX)(),(0,o.CE)("div",Qs,s[6]||(s[6]=[(0,o.Lk)("i",{class:"fas fa-spinner fa-spin"},null,-1),(0,o.eW)(" Cargando Usuarios ... ")]))):r.filteredUsers.length>0?((0,o.uX)(),(0,o.CE)("table",Gs,[s[8]||(s[8]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"ID"),(0,o.Lk)("th",null,"Usuario"),(0,o.Lk)("th",null,"Último acceso"),(0,o.Lk)("th",null,"Estado"),(0,o.Lk)("th",null,"Acciones")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.filteredUsers,(e=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id},[(0,o.Lk)("td",null,(0,u.v_)(e.id),1),(0,o.Lk)("td",null,[(0,o.Lk)("div",js,[(0,o.Lk)("img",{src:e.profile_photo||a(1264),alt:"Foto de perfil",class:"profile-pic"},null,8,Ks),(0,o.Lk)("div",Hs,[(0,o.Lk)("span",$s,(0,u.v_)(e.name),1),(0,o.Lk)("span",Js,(0,u.v_)(e.email),1)])])]),(0,o.Lk)("td",Ys,(0,u.v_)(e.last_seen_text),1),(0,o.Lk)("td",null,[(0,o.Lk)("span",{class:(0,u.C4)(["status-led",e.is_online?"online":"offline"]),title:e.is_online?"Conectado":"Desconectado"},null,10,Zs)]),(0,o.Lk)("td",null,[(0,o.Lk)("button",{class:"action-btn",onClick:s=>r.openUserActionsModal(e)},s[7]||(s[7]=[(0,o.Lk)("i",{class:"fas fa-cog"},null,-1)]),8,ea)])])))),128))])])):((0,o.uX)(),(0,o.CE)("div",sa,s[9]||(s[9]=[(0,o.Lk)("div",{class:"empty-icon"},[(0,o.Lk)("i",{class:"fas fa-users-slash"})],-1),(0,o.Lk)("p",{class:"empty-title"},"No se encontraron usuarios",-1),(0,o.Lk)("small",{class:"empty-subtext"}," Añade nuevos usuarios o ajusta tu búsqueda para comenzar a gestionar tu equipo en KIIBOT. ",-1)]))),(0,o.bF)(d,{user:n.selectedUser,isOpen:n.showUserActionsModal,onClose:s[2]||(s[2]=e=>n.showUserActionsModal=!1),onChangePassword:r.handlePasswordChange,onChangeRole:r.handleRoleChange,onDeleteUser:r.handleUserDelete},null,8,["user","isOpen","onChangePassword","onChangeRole","onDeleteUser"]),(0,o.bF)(c,{"is-open":n.showAddUserModal,"preview-photo":n.previewPhoto,"show-new-password":n.showNewPassword,"invalid-fields":n.invalidFields,"form-error":n.formError,onClose:r.closeAddUserModal,onSubmit:r.handleAddUser,onUploadPhoto:r.handlePhotoUpload,onTogglePassword:r.togglePassword,onUpdateNewPassword:s[3]||(s[3]=e=>{n.newPassword=e})},null,8,["is-open","preview-photo","show-new-password","invalid-fields","form-error","onClose","onSubmit","onUploadPhoto","onTogglePassword"]),n.showToast?((0,o.uX)(),(0,o.CE)("div",aa,(0,u.v_)(n.toastMessage),1)):(0,o.Q3)("",!0)])}const oa={ref:"dialog",class:"user-modal user-actions-dialog"},ia={class:"modal-content"},la={class:"user-actions-header"},na={class:"user-info-block"},ra=["src"],da={class:"user-text-block"},ca={class:"user-name"},ua={class:"user-email"},ha={class:"user-actions-icons"},ma={key:0,class:"fas fa-key"},pa={key:1,class:"fas fa-spinner fa-spin"},fa={key:1,class:"fas fa-spinner fa-spin"},ga={key:0,class:"fas fa-trash-alt"},va={key:1,class:"fas fa-spinner fa-spin"},ka={class:"user-attributes-row"},ba={class:"attribute"},wa={class:"value"},La={class:"attribute"},Ca={class:"value"},ya={class:"attribute"},Ea={class:"attribute"},Ma={key:0,class:"input-group icon-input"},Ia=["type"],xa={key:1,class:"form-error-message"},Fa={key:2,class:"form-success-message"},Da={key:3,class:"modal-actions"},Ta={key:4,class:"delete-confirm-box"},Sa={class:"modal-actions"},Aa={key:5,class:"modal-actions"},Pa=["disabled"];function Ua(e,s,i,l,n,r){return(0,o.uX)(),(0,o.CE)("dialog",oa,[(0,o.Lk)("div",ia,[(0,o.Lk)("div",la,[(0,o.Lk)("div",na,[(0,o.Lk)("img",{src:n.selectedUser?.profile_photo||a(1264),class:"avatar",alt:"Avatar"},null,8,ra),(0,o.Lk)("div",da,[(0,o.Lk)("h2",ca,(0,u.v_)(n.selectedUser?.name),1),(0,o.Lk)("p",ua,(0,u.v_)(n.selectedUser?.email),1)])]),(0,o.Lk)("div",ha,[(0,o.Lk)("div",{onClick:s[0]||(s[0]=(...e)=>r.togglePasswordChange&&r.togglePasswordChange(...e)),class:(0,u.C4)(["action-icon",[{active:n.showPasswordInput},{disabled:r.isAnyLoading||n.selectedUser?.is_online},{loading:n.isLoadingPassword}]])},[n.isLoadingPassword?((0,o.uX)(),(0,o.CE)("i",pa)):((0,o.uX)(),(0,o.CE)("i",ma))],2),(0,o.Lk)("div",{onClick:s[1]||(s[1]=(...e)=>r.toggleRole&&r.toggleRole(...e)),class:(0,u.C4)(["action-icon",["admin"===n.selectedUser?.role?"admin-role":"user-role",{disabled:r.isAnyLoading||n.selectedUser?.is_online},{loading:n.isLoadingRole}]])},[n.isLoadingRole?((0,o.uX)(),(0,o.CE)("i",fa)):((0,o.uX)(),(0,o.CE)("i",{key:0,class:(0,u.C4)("admin"===n.selectedUser?.role?"fas fa-user-minus":"fas fa-user-plus")},null,2))],2),(0,o.Lk)("div",{onClick:s[2]||(s[2]=(...e)=>r.toggleDeleteConfirm&&r.toggleDeleteConfirm(...e)),class:(0,u.C4)(["action-icon danger",[{active:n.showDeleteConfirm},{disabled:r.isAnyLoading||n.selectedUser?.is_online},{loading:n.isLoadingDelete}]])},[n.isLoadingDelete?((0,o.uX)(),(0,o.CE)("i",va)):((0,o.uX)(),(0,o.CE)("i",ga))],2)]),(0,o.Lk)("div",ka,[(0,o.Lk)("div",ba,[s[9]||(s[9]=(0,o.Lk)("span",{class:"label"},"ID:",-1)),(0,o.Lk)("span",wa,(0,u.v_)(n.selectedUser?.id),1)]),(0,o.Lk)("div",La,[s[10]||(s[10]=(0,o.Lk)("span",{class:"label"},"Último Acceso:",-1)),(0,o.Lk)("span",Ca,(0,u.v_)(n.selectedUser?.last_seen_text),1)]),(0,o.Lk)("div",ya,[s[11]||(s[11]=(0,o.Lk)("span",{class:"label"},"Estado:",-1)),(0,o.Lk)("span",{class:(0,u.C4)(["value",n.selectedUser?.is_online?"connected":"disconnected"])},(0,u.v_)(n.selectedUser?.is_online?"Conectado":"Desconectado"),3)]),(0,o.Lk)("div",Ea,[s[12]||(s[12]=(0,o.Lk)("span",{class:"label"},"Rol:",-1)),(0,o.Lk)("span",{class:(0,u.C4)(["value","admin"===n.selectedUser?.role?"admin-role":"user-role"])},(0,u.v_)(n.selectedUser?.role||"usuario"),3)])])]),n.showPasswordInput?((0,o.uX)(),(0,o.CE)("div",Ma,[s[13]||(s[13]=(0,o.Lk)("i",{class:"fas fa-lock"},null,-1)),(0,o.bo)((0,o.Lk)("input",{type:n.showNewPassword?"text":"password","onUpdate:modelValue":s[3]||(s[3]=e=>n.newUserPassword=e),placeholder:"Contraseña",class:(0,u.C4)({error:n.passwordError})},null,10,Ia),[[t.hp,n.newUserPassword]]),(0,o.Lk)("i",{class:(0,u.C4)([n.showNewPassword?"fas fa-eye-slash":"fas fa-eye","toggle"]),onClick:s[4]||(s[4]=e=>r.togglePassword("new"))},null,2)])):(0,o.Q3)("",!0),n.passwordError?((0,o.uX)(),(0,o.CE)("p",xa,(0,u.v_)(n.passwordError),1)):(0,o.Q3)("",!0),n.successMessage?((0,o.uX)(),(0,o.CE)("p",Fa,(0,u.v_)(n.successMessage),1)):(0,o.Q3)("",!0),n.showPasswordInput?((0,o.uX)(),(0,o.CE)("div",Da,[(0,o.Lk)("button",{class:"confirm-btn",onClick:s[5]||(s[5]=(...e)=>r.submitNewPassword&&r.submitNewPassword(...e))},"Guardar contraseña")])):(0,o.Q3)("",!0),n.showDeleteConfirm?((0,o.uX)(),(0,o.CE)("div",Ta,[(0,o.Lk)("p",null,[s[14]||(s[14]=(0,o.eW)("¿Seguro que deseas eliminar a ")),(0,o.Lk)("strong",null,(0,u.v_)(n.selectedUser?.name),1),s[15]||(s[15]=(0,o.eW)("?"))]),(0,o.Lk)("div",Sa,[(0,o.Lk)("button",{class:"cancel-btn",onClick:s[6]||(s[6]=(...e)=>r.toggleDeleteConfirm&&r.toggleDeleteConfirm(...e))},"Cancelar"),(0,o.Lk)("button",{class:"confirm-btn danger",onClick:s[7]||(s[7]=(...e)=>r.deleteUser&&r.deleteUser(...e))},"Eliminar")])])):(0,o.Q3)("",!0),n.showDeleteConfirm||n.showPasswordInput?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Aa,[(0,o.Lk)("button",{class:"cancel-btn",onClick:s[8]||(s[8]=(...e)=>r.close&&r.close(...e)),disabled:r.isAnyLoading},"Cerrar",8,Pa)]))])],512)}var Xa={name:"UserActionsModal",props:{user:Object,isOpen:Boolean},data(){return{selectedUser:null,showPasswordInput:!1,showNewPassword:!1,newUserPassword:"",passwordError:"",successMessage:"",showDeleteConfirm:!1,isLoadingPassword:!1,isLoadingRole:!1,isLoadingDelete:!1}},watch:{user:{immediate:!0,handler(e){this.selectedUser={...e}}},isOpen(e){const s=this.$refs.dialog;e&&s&&s.showModal(),!e&&s&&s.close()}},computed:{isAnyLoading(){return this.isLoadingPassword||this.isLoadingRole||this.isLoadingDelete}},methods:{close(){this.$emit("close"),this.resetState()},resetState(){this.showPasswordInput=!1,this.newUserPassword="",this.showDeleteConfirm=!1},togglePasswordChange(){this.showDeleteConfirm||(this.showPasswordInput=!this.showPasswordInput,this.showPasswordInput?this.showDeleteConfirm=!1:this.passwordError="")},async submitNewPassword(){const e=this.newUserPassword.trim();if(!e)return void(this.passwordError="Contraseña vacía.");const s=[];if(e.length<6&&s.push("mínimo 6 caracteres"),/[a-z]/.test(e)||s.push("una letra minúscula"),/[A-Z]/.test(e)||s.push("una letra mayúscula"),/[\d\W]/.test(e)||s.push("un número o símbolo"),s.length>0)return this.passwordError=`La contraseña debe contener ${s.join(", ")}.`,void setTimeout((()=>this.passwordError=""),3500);this.successMessage="Contraseña actualizada",this.showPasswordInput=!1,this.newUserPassword="",setTimeout((()=>this.successMessage=""),2500)},togglePassword(e){"new"===e&&(this.showNewPassword=!this.showNewPassword)},toggleRole(){if(this.selectedUser.is_online||this.isAnyLoading)return;const e="admin"===this.selectedUser.role?"user":"admin";this.selectedUser.role=e,this.successMessage="Rol cambiado a "+("admin"===e?"Administrador":"Usuario"),this.$emit("change-role",{id:this.selectedUser.id,newRole:e}),setTimeout((()=>this.successMessage=""),2e3)},toggleDeleteConfirm(){this.showPasswordInput||(this.showDeleteConfirm=!this.showDeleteConfirm,this.showDeleteConfirm&&(this.showPasswordInput=!1))},deleteUser(){this.$emit("delete-user",this.selectedUser.id),this.successMessage="Usuario eliminado",setTimeout((()=>{this.successMessage="",this.close()}),2e3)}}};const Va=(0,n.A)(Xa,[["render",Ua],["__scopeId","data-v-5465e78e"]]);var Ba=Va;const Oa={class:"user-basic-info"},Ra=["src"],Wa={class:"user-fields"},_a={class:"input-group icon-input"},za=["disabled"],Na={class:"input-group icon-input"},qa=["disabled"],Qa={class:"password-role-row"},Ga={class:"input-group icon-input password-field"},ja=["type","disabled"],Ka={class:"input-group icon-input role-field"},Ha=["disabled"],$a={key:1,class:"form-error-message"},Ja={class:"modal-actions"},Ya=["disabled"],Za=["disabled"];function et(e,s,i,l,n,r){return(0,o.uX)(),(0,o.CE)("dialog",{ref:"dialog",class:"user-modal",onClose:s[9]||(s[9]=(...e)=>r.onDialogClose&&r.onDialogClose(...e))},[(0,o.Lk)("form",{onSubmit:s[8]||(s[8]=(0,t.D$)(((...e)=>r.validateAndSubmit&&r.validateAndSubmit(...e)),["prevent"])),class:(0,u.C4)(["modal-content",{"fade-out":n.isClosing}])},[n.toastMessage?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,u.C4)(["mini-toast",n.toastType])},(0,u.v_)(n.toastMessage),3)):(0,o.Q3)("",!0),s[17]||(s[17]=(0,o.Lk)("h2",{class:"modal-title"},"AÑADIR NUEVO USUARIO",-1)),s[18]||(s[18]=(0,o.Lk)("p",{class:"modal-subtitle"},"Añade la información del nuevo usuario",-1)),(0,o.Lk)("div",Oa,[(0,o.Lk)("div",{class:"avatar-wrapper",onClick:s[0]||(s[0]=(...e)=>r.emitTriggerFile&&r.emitTriggerFile(...e)),title:"Cambiar avatar"},[(0,o.Lk)("img",{src:i.previewPhoto||a(1264),alt:"Avatar",class:"avatar-preview",draggable:"false"},null,8,Ra)]),(0,o.Lk)("div",Wa,[(0,o.Lk)("div",_a,[s[10]||(s[10]=(0,o.Lk)("i",{class:"fas fa-user"},null,-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=e=>n.name=e),placeholder:"Nombre",class:(0,u.C4)({error:n.invalidFields.name}),disabled:r.isDisabled},null,10,za),[[t.Jo,n.name]])]),(0,o.Lk)("div",Na,[s[11]||(s[11]=(0,o.Lk)("i",{class:"fas fa-envelope"},null,-1)),(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":s[2]||(s[2]=e=>n.email=e),placeholder:"Correo",class:(0,u.C4)({error:n.invalidFields.email}),disabled:r.isDisabled},null,10,qa),[[t.Jo,n.email]])])])]),(0,o.Lk)("input",{type:"file",ref:"fileInput",accept:"image/*",onChange:s[3]||(s[3]=(...e)=>r.emitUploadPhoto&&r.emitUploadPhoto(...e)),style:{display:"none"}},null,544),(0,o.Lk)("div",Qa,[(0,o.Lk)("div",Ga,[s[12]||(s[12]=(0,o.Lk)("i",{class:"fas fa-lock"},null,-1)),(0,o.bo)((0,o.Lk)("input",{type:i.showNewPassword?"text":"password","onUpdate:modelValue":s[4]||(s[4]=e=>n.password=e),placeholder:"Contraseña",class:(0,u.C4)({error:n.invalidFields.password}),disabled:r.isDisabled},null,10,ja),[[t.hp,n.password]]),(0,o.Lk)("i",{class:(0,u.C4)([i.showNewPassword?"fas fa-eye-slash":"fas fa-eye","toggle"]),onClick:s[5]||(s[5]=(...e)=>r.emitTogglePassword&&r.emitTogglePassword(...e))},null,2)]),(0,o.Lk)("div",Ka,[s[14]||(s[14]=(0,o.Lk)("i",{class:"fas fa-user-tag"},null,-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":s[6]||(s[6]=e=>n.role=e),class:(0,u.C4)({error:n.invalidFields.role}),disabled:r.isDisabled},s[13]||(s[13]=[(0,o.Lk)("option",{value:"",disabled:"",selected:"",hidden:""},"Rol",-1),(0,o.Lk)("option",{value:"user"},"Usuario",-1),(0,o.Lk)("option",{value:"admin"},"Administrador",-1)]),10,Ha),[[t.u1,n.role]])])]),n.localFormError?((0,o.uX)(),(0,o.CE)("p",$a,(0,u.v_)(n.localFormError),1)):(0,o.Q3)("",!0),(0,o.Lk)("div",Ja,[(0,o.Lk)("button",{type:"button",class:"cancel-btn",onClick:s[7]||(s[7]=(...e)=>r.emitClose&&r.emitClose(...e)),disabled:r.isDisabled}," Cancelar ",8,Ya),(0,o.Lk)("button",{type:"submit",class:"confirm-btn",disabled:r.isDisabled},[n.isSubmitting?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[s[15]||(s[15]=(0,o.Lk)("i",{class:"fas fa-spinner fa-spin"},null,-1)),s[16]||(s[16]=(0,o.eW)(" Enviando... "))],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)(" Confirmar ")],64))],8,Za)])],34)],544)}var st={name:"AddUserModal",props:{isOpen:{type:Boolean,required:!0},previewPhoto:{type:String,default:null},showNewPassword:{type:Boolean,required:!0}},emits:["close","submit","upload-photo","trigger-file","toggle-password"],data(){return{name:"",email:"",password:"",role:"",localFormError:"",invalidFields:{name:!1,email:!1,password:!1,role:!1},isSubmitting:!1,toastMessage:"",toastType:"",isClosing:!1}},computed:{isDisabled(){return this.isSubmitting||!!this.toastMessage}},watch:{isOpen(e){e?(this.isClosing=!1,this.$refs.dialog?.showModal()):this.$refs.dialog?.close()}},methods:{emitClose(){this.resetForm(),this.$emit("close")},emitUploadPhoto(e){this.$emit("upload-photo",e)},emitTriggerFile(){this.isDisabled||this.$refs.fileInput?.click()},emitTogglePassword(){this.$emit("toggle-password","new")},async validateAndSubmit(){this.localFormError="",this.invalidFields={name:!1,email:!1,password:!1,role:!1};const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,s=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[\d\W]).{6,}$/;if(this.name.trim()||(this.invalidFields.name=!0),this.email.trim()||(this.invalidFields.email=!0),this.password.trim()||(this.invalidFields.password=!0),this.role||(this.invalidFields.role=!0),this.name&&this.email&&this.password&&this.role){if(!e.test(this.email))return this.invalidFields.email=!0,void(this.localFormError="El correo no tiene formato válido.");if(!s.test(this.password))return this.invalidFields.password=!0,void(this.localFormError="La contraseña debe tener al menos 6 caracteres, mayúscula, minúscula y número/símbolo.");this.isSubmitting=!0,this.$emit("submit",{name:this.name.trim(),email:this.email.trim(),password:this.password.trim(),role:this.role,done:this.onSubmitDone})}else this.localFormError="Por favor, completa todos los campos."},onSubmitDone(e,s){this.toastMessage=s,this.toastType=e?"success":"error",setTimeout((()=>{this.toastMessage="",this.emitClose()}),2500)},onDialogClose(){this.resetForm()},resetForm(){this.name="",this.email="",this.password="",this.role="",this.localFormError="",this.invalidFields={name:!1,email:!1,password:!1,role:!1},this.isSubmitting=!1,this.toastMessage="",this.toastType="",this.isClosing=!1,document.body.style.overflow=""}}};const at=(0,n.A)(st,[["render",et],["__scopeId","data-v-19928796"]]);var tt=at,ot=[{id:1,name:"José Macías",email:"admin@kiibot.com",role:"admin",profile_photo:"",last_seen_text:"Activo",is_online:!0},{id:2,name:"Sofía Torres",email:"sofia@kiibot.com",role:"user",profile_photo:"",last_seen_text:"Hace 1 día",is_online:!1}],it={name:"UserManagement",data(){return{previewPhoto:null,showNewPassword:!1,newPassword:"",formError:"",invalidFields:{name:!1,email:!1,password:!1,role:!1},selectedUser:null,showUserActionsModal:!1,showAddUserModal:!1,searchQuery:"",toastMessage:"",showToast:!1,users:[],isLoading:!0}},components:{UserActionsModal:Ba,AddUserModal:tt},computed:{filteredUsers(){const e=this.searchQuery.trim().toLowerCase();return e?this.users.filter((s=>{const a=s.name.toLowerCase(),t=s.email.toLowerCase(),o=String(s.id);return a.includes(e)||t.includes(e)||o.includes(e)})):this.users}},mounted(){this.fetchUsers()},methods:{fetchUsers(){const e=localStorage.getItem("kiibot_users");this.users=e?JSON.parse(e):[...ot],this.saveUsers(),this.isLoading=!1},saveUsers(){localStorage.setItem("kiibot_users",JSON.stringify(this.users))},openAddUserModal(){this.showAddUserModal=!0},closeAddUserModal(){this.showAddUserModal=!1,this.previewPhoto=null,this.newPassword="",this.formError="",this.invalidFields={name:!1,email:!1,password:!1,role:!1}},handleAddUser({name:e,email:s,role:a,done:t}){const o=this.users.length?Math.max(...this.users.map((e=>e.id)))+1:1,i={id:o,name:e,email:s,role:a,profile_photo:this.previewPhoto||"",last_seen_text:"Justo ahora",is_online:!1};this.users.push(i),this.saveUsers(),t(!0,"Usuario añadido exitosamente")},handlePhotoUpload(e){const s=e.target.files[0];if(s){const e=new FileReader;e.onload=e=>{this.previewPhoto=e.target.result},e.readAsDataURL(s)}},togglePassword(e){"new"===e&&(this.showNewPassword=!this.showNewPassword)},showSuccessToast(e){this.toastMessage=e,this.showToast=!0,setTimeout((()=>{this.showToast=!1}),2500)},openUserActionsModal(e){this.selectedUser=e,this.showUserActionsModal=!0},handlePasswordChange({id:e}){console.log(`Se ha cambiado la contraseña para el usuario con ID ${e}`)},handleRoleChange({id:e,newRole:s}){const a=this.users.find((s=>s.id===e));a&&(a.role=s,this.saveUsers())},handleUserDelete(e){this.users=this.users.filter((s=>s.id!==e)),this.saveUsers()}}};const lt=(0,n.A)(it,[["render",ta],["__scopeId","data-v-6692bb94"]]);var nt=lt;const rt={class:"metrics-panel"},dt={class:"metrics-header"},ct={class:"left-column"},ut={class:"select-refresh-group"},ht=["value"],mt={class:"right-column"},pt={key:0,class:"filter-dropdown-container"},ft={class:"filter-dropdown-content"},gt={key:0,class:"applied-filter"},vt={key:1,class:"applied-filter"};function kt(e,s,a,i,l,n){const r=(0,o.g2)("ModalTime"),d=(0,o.g2)("ModalDate"),c=(0,o.g2)("GeneralMetrics"),h=(0,o.g2)("UserMetrics");return(0,o.uX)(),(0,o.CE)("div",rt,[(0,o.Lk)("div",dt,[(0,o.Lk)("div",ct,[(0,o.Lk)("div",ut,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>l.filters.type=e),class:"metric-select"},[s[8]||(s[8]=(0,o.Lk)("option",{value:"generales"},"Generales",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.users,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,u.v_)(e.name),9,ht)))),128))],512),[[t.u1,l.filters.type]]),(0,o.Lk)("button",{class:"refresh-btn",onClick:s[1]||(s[1]=(...e)=>n.updateMetrics&&n.updateMetrics(...e))},s[9]||(s[9]=[(0,o.Lk)("i",{class:"fas fa-sync-alt"},null,-1)]))])]),(0,o.Lk)("div",mt,[(0,o.Lk)("button",{class:"icon-btn",onClick:s[2]||(s[2]=e=>n.openModal("time"))},s[10]||(s[10]=[(0,o.Lk)("i",{class:"fas fa-clock"},null,-1)])),(0,o.Lk)("button",{class:"icon-btn",onClick:s[3]||(s[3]=e=>n.openModal("date"))},s[11]||(s[11]=[(0,o.Lk)("i",{class:"fas fa-calendar-alt"},null,-1)])),(0,o.Lk)("button",{class:"refresh-btn mobile",onClick:s[4]||(s[4]=(...e)=>n.updateMetrics&&n.updateMetrics(...e))},s[12]||(s[12]=[(0,o.Lk)("i",{class:"fas fa-sync-alt"},null,-1)]))])]),l.appliedFilters.time||l.appliedFilters.date?((0,o.uX)(),(0,o.CE)("div",pt,[(0,o.Lk)("div",{class:"filter-dropdown-toggle",onClick:s[5]||(s[5]=(...e)=>n.toggleFilterDropdown&&n.toggleFilterDropdown(...e))},[s[13]||(s[13]=(0,o.Lk)("span",null,[(0,o.Lk)("i",{class:"fas fa-sliders-h"}),(0,o.eW)(" Filtros Aplicados")],-1)),(0,o.Lk)("i",{class:(0,u.C4)(["fas",l.showFilterDropdown?"fa-chevron-up":"fa-chevron-down"])},null,2)]),(0,o.bo)((0,o.Lk)("div",ft,[l.appliedFilters.time?((0,o.uX)(),(0,o.CE)("div",gt,[s[14]||(s[14]=(0,o.Lk)("i",{class:"fas fa-clock"},null,-1)),(0,o.eW)(" Hora: "+(0,u.v_)(l.appliedFilters.time.startDisplay)+" - "+(0,u.v_)(l.appliedFilters.time.endDisplay)+" ",1),(0,o.Lk)("i",{class:"fas fa-times clear-icon",onClick:s[6]||(s[6]=(...e)=>n.clearTimeFilter&&n.clearTimeFilter(...e)),title:"Quitar filtro de hora"})])):(0,o.Q3)("",!0),l.appliedFilters.date?((0,o.uX)(),(0,o.CE)("div",vt,[s[15]||(s[15]=(0,o.Lk)("i",{class:"fas fa-calendar-alt"},null,-1)),(0,o.eW)(" Fecha: "+(0,u.v_)(l.appliedFilters.date.display)+" ",1),(0,o.Lk)("i",{class:"fas fa-times clear-icon",onClick:s[7]||(s[7]=(...e)=>n.clearDateFilter&&n.clearDateFilter(...e)),title:"Quitar filtro de fecha"})])):(0,o.Q3)("",!0)],512),[[t.aG,l.showFilterDropdown]])])):(0,o.Q3)("",!0),"time"===l.activeModal?((0,o.uX)(),(0,o.Wv)(r,{key:1,onClose:n.closeModal,onApply:n.applyTimeFilter},null,8,["onClose","onApply"])):(0,o.Q3)("",!0),"date"===l.activeModal?((0,o.uX)(),(0,o.Wv)(d,{key:2,onClose:n.closeModal,onApply:n.applyDateFilter},null,8,["onClose","onApply"])):(0,o.Q3)("",!0),"generales"===l.filters.type?((0,o.uX)(),(0,o.Wv)(c,{key:3,filters:l.filters,appliedFilters:l.appliedFilters},null,8,["filters","appliedFilters"])):((0,o.uX)(),(0,o.Wv)(h,{key:4,userId:l.filters.type,filters:l.filters,appliedFilters:l.appliedFilters},null,8,["userId","filters","appliedFilters"]))])}const bt={ref:"dialog",class:"user-modal time-filter-modal"},wt={class:"modal-content"},Lt={class:"time-form"},Ct={class:"time-field"},yt={class:"time-field"},Et={key:0,class:"form-error-message"},Mt=["disabled"],It={class:"modal-actions"};function xt(e,s,a,i,l,n){return(0,o.uX)(),(0,o.CE)("dialog",bt,[(0,o.Lk)("div",wt,[s[9]||(s[9]=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h2",{class:"modal-title"},[(0,o.Lk)("i",{class:"fas fa-clock"}),(0,o.eW)(" Selecciona un rango de hora ")])],-1)),(0,o.Lk)("div",Lt,[(0,o.Lk)("div",Ct,[s[6]||(s[6]=(0,o.Lk)("label",{for:"start-time"},"Hora de inicio",-1)),(0,o.bo)((0,o.Lk)("input",{id:"start-time",type:"time","onUpdate:modelValue":s[0]||(s[0]=e=>l.customStart=e),onInput:s[1]||(s[1]=(...e)=>n.validateTimes&&n.validateTimes(...e))},null,544),[[t.Jo,l.customStart]])]),(0,o.Lk)("div",yt,[s[7]||(s[7]=(0,o.Lk)("label",{for:"end-time"},"Hora de fin",-1)),(0,o.bo)((0,o.Lk)("input",{id:"end-time",type:"time","onUpdate:modelValue":s[2]||(s[2]=e=>l.customEnd=e),onInput:s[3]||(s[3]=(...e)=>n.validateTimes&&n.validateTimes(...e))},null,544),[[t.Jo,l.customEnd]])]),l.validationError?((0,o.uX)(),(0,o.CE)("p",Et,(0,u.v_)(l.validationError),1)):(0,o.Q3)("",!0),(0,o.Lk)("button",{class:"confirm-btn",onClick:s[4]||(s[4]=(...e)=>n.applyCustom&&n.applyCustom(...e)),disabled:!l.customStart||!l.customEnd||Boolean(l.validationError)},s[8]||(s[8]=[(0,o.Lk)("i",{class:"fas fa-check-circle"},null,-1),(0,o.eW)(" Aplicar ")]),8,Mt)]),(0,o.Lk)("div",It,[(0,o.Lk)("button",{class:"cancel-btn",onClick:s[5]||(s[5]=(...e)=>n.close&&n.close(...e))},"Cancelar")])])],512)}var Ft={name:"ModalTime",data(){return{customStart:"",customEnd:"",validationError:""}},mounted(){this.openDialog()},methods:{openDialog(){const e=this.$refs.dialog;e&&"function"===typeof e.showModal&&e.showModal()},close(){const e=this.$refs.dialog;e&&"function"===typeof e.close&&e.close(),this.$emit("close"),this.resetForm()},applyCustom(){if(!this.customStart||!this.customEnd||this.validationError)return;const e=this.formatTo12h(this.customStart),s=this.formatTo12h(this.customEnd);this.$emit("apply",{start12h:e,end12h:s}),this.close()},validateTimes(){this.customStart&&this.customEnd&&this.customStart>=this.customEnd?this.validationError="La hora de inicio debe ser menor que la hora de fin.":this.validationError=""},formatTo12h(e){const[s,a]=e.split(":");let t=parseInt(s,10);const o=t>=12?"PM":"AM";return t=t%12||12,`${t.toString().padStart(2,"0")}:${a} ${o}`},resetForm(){this.customStart="",this.customEnd="",this.validationError=""}}};const Dt=(0,n.A)(Ft,[["render",xt],["__scopeId","data-v-763361d5"]]);var Tt=Dt;const St={ref:"dialog",class:"time-filter-modal"},At={class:"modal-content"},Pt={class:"time-form"},Ut={class:"time-field"},Xt={class:"time-field"},Vt={key:0,class:"form-error-message"},Bt=["disabled"],Ot={class:"modal-actions"};function Rt(e,s,a,i,l,n){return(0,o.uX)(),(0,o.CE)("dialog",St,[(0,o.Lk)("div",At,[s[9]||(s[9]=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h2",{class:"modal-title"},[(0,o.Lk)("i",{class:"fas fa-calendar-alt"}),(0,o.eW)(" Selecciona un rango de fechas ")])],-1)),(0,o.Lk)("div",Pt,[(0,o.Lk)("div",Ut,[s[6]||(s[6]=(0,o.Lk)("label",null,"Fecha de inicio",-1)),(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":s[0]||(s[0]=e=>l.startDate=e),onInput:s[1]||(s[1]=(...e)=>n.validateRange&&n.validateRange(...e))},null,544),[[t.Jo,l.startDate]])]),(0,o.Lk)("div",Xt,[s[7]||(s[7]=(0,o.Lk)("label",null,"Fecha de fin",-1)),(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=e=>l.endDate=e),onInput:s[3]||(s[3]=(...e)=>n.validateRange&&n.validateRange(...e))},null,544),[[t.Jo,l.endDate]])]),l.validationError?((0,o.uX)(),(0,o.CE)("p",Vt,(0,u.v_)(l.validationError),1)):(0,o.Q3)("",!0),(0,o.Lk)("button",{class:"confirm-btn",onClick:s[4]||(s[4]=(...e)=>n.applyDateRange&&n.applyDateRange(...e)),disabled:!l.startDate||!l.endDate||Boolean(l.validationError)},s[8]||(s[8]=[(0,o.Lk)("i",{class:"fas fa-check-circle"},null,-1),(0,o.eW)(" Aplicar ")]),8,Bt)]),(0,o.Lk)("div",Ot,[(0,o.Lk)("button",{class:"cancel-btn",onClick:s[5]||(s[5]=(...e)=>n.close&&n.close(...e))},"Cancelar")])])],512)}var Wt={name:"ModalDate",data(){return{startDate:"",endDate:"",validationError:""}},mounted(){this.$refs.dialog&&this.$refs.dialog.showModal()},methods:{close(){this.$refs.dialog.close(),this.$emit("close")},applyDateRange(){if(!this.startDate||!this.endDate||this.validationError)return;const e={start:this.startDate,end:this.endDate,display:`${this.formatDisplay(this.startDate)} - ${this.formatDisplay(this.endDate)}`};this.$emit("apply",e),this.close()},validateRange(){this.startDate&&this.endDate&&this.endDate<this.startDate?this.validationError="La fecha de fin no puede ser menor que la de inicio.":this.validationError=""},formatDisplay(e){const[s,a,t]=e.split("-");return`${t}/${a}/${s}`}}};const _t=(0,n.A)(Wt,[["render",Rt],["__scopeId","data-v-66b2f12d"]]);var zt=_t;const Nt={class:"general-metrics"},qt={class:"metrics-section"},Qt={class:"metrics-grid"},Gt={class:"metrics-section"},jt={class:"metrics-grid"},Kt={class:"metrics-section"},Ht={class:"metrics-grid"},$t={class:"metrics-section"},Jt={class:"metrics-grid"};function Yt(e,s,a,t,i,l){const n=(0,o.g2)("MetricCard"),r=(0,o.g2)("MetricProgressGroup"),d=(0,o.g2)("MetricPie"),c=(0,o.g2)("MetricList");return(0,o.uX)(),(0,o.CE)("div",Nt,[(0,o.Lk)("section",qt,[s[0]||(s[0]=(0,o.Lk)("h3",{class:"section-title"},[(0,o.Lk)("i",{class:"fas fa-comments"}),(0,o.eW)(" Conversaciones y Actividad")],-1)),(0,o.Lk)("div",Qt,[(0,o.bF)(n,{title:"Total de Msj",icon:"fas fa-comment-dots",value:i.data.totalMessages},null,8,["value"]),(0,o.bF)(n,{title:"Msj Eliminados",icon:"fas fa-trash",value:i.data.deletedMessages},null,8,["value"]),(0,o.bF)(n,{title:"Prom. Duración por Chat",icon:"fas fa-hourglass-half",value:null!=i.data.avgDuration?`${i.data.avgDuration} msgs`:null},null,8,["value"])]),(0,o.bF)(r,{title:"Chats",icon:"fas fa-comments",metrics:[{label:"Activos",value:i.data.activeChats,icon:"fas fa-calendar-day"},{label:"Eliminados",value:i.data.deletedChats,icon:"fas fa-trash-alt"}]},null,8,["metrics"])]),(0,o.Lk)("section",Gt,[s[1]||(s[1]=(0,o.Lk)("h3",{class:"section-title"},[(0,o.Lk)("i",{class:"fas fa-brain"}),(0,o.eW)(" Inteligencia y Respuestas")],-1)),(0,o.Lk)("div",jt,[(0,o.bF)(n,{title:"Respuestas Generativas",icon:"fas fa-pen-fancy",value:i.data.generativeUses},null,8,["value"]),(0,o.bF)(n,{title:"Tasa de Intención",icon:"fas fa-percentage",value:i.data.intentRate+"%"},null,8,["value"])]),(0,o.bF)(d,{total:i.data.successfulResponses+i.data.emptyResponses,conContexto:i.data.successfulResponses},null,8,["total","conContexto"])]),(0,o.Lk)("section",Kt,[s[2]||(s[2]=(0,o.Lk)("h3",{class:"section-title"},[(0,o.Lk)("i",{class:"fas fa-folder-open"}),(0,o.eW)(" Documentos y Conocimiento")],-1)),(0,o.Lk)("div",Ht,[(0,o.bF)(n,{title:"Documentos Totales",icon:"fas fa-file-alt",value:i.data.totalDocs},null,8,["value"]),(0,o.bF)(n,{title:"Fragmentos Generados",icon:"fas fa-layer-group",value:i.data.totalEmbeddings},null,8,["value"])]),(0,o.bF)(c,{title:"Documentos Más Utilizados",icon:"fas fa-file-alt",items:i.data.topDocs.map((e=>({label:e.Documento,value:e["Veces Usado"]})))},null,8,["items"]),(0,o.bF)(c,{title:"Fragmentos Más Relevantes",icon:"fas fa-align-left",items:i.data.topFrags.map((e=>({label:e.Fragmento,value:e["Veces Encontrado"]})))},null,8,["items"])]),(0,o.Lk)("section",$t,[s[3]||(s[3]=(0,o.Lk)("h3",{class:"section-title"},[(0,o.Lk)("i",{class:"fas fa-tachometer-alt"}),(0,o.eW)(" Rendimiento OpenAI")],-1)),(0,o.Lk)("div",Jt,[(0,o.bF)(n,{title:"Tiempo Prom. de Respuesta",icon:"fas fa-clock",value:i.data.responseTime+" seg"},null,8,["value"]),(0,o.bF)(n,{title:"Errores API",icon:"fas fa-exclamation-triangle",value:i.data.apiErrors},null,8,["value"]),(0,o.bF)(n,{title:"Respuestas Bot Eliminadas",icon:"fas fa-trash-restore-alt",value:i.data.deletedBotReplies},null,8,["value"])]),(0,o.bF)(r,{title:"Tokens Usados",icon:"fas fa-bolt",metrics:[{label:"Tokes",value:i.data.tokens}]},null,8,["metrics"])])])}const Zt={class:"metric-card"},eo={key:0,class:"icon-container"},so={class:"metric-content"},ao={class:"metric-title"},to={class:"metric-value"},oo={key:2};function io(e,s,a,t,i,l){return(0,o.uX)(),(0,o.CE)("div",Zt,[a.icon?((0,o.uX)(),(0,o.CE)("div",eo,[(0,o.Lk)("i",{class:(0,u.C4)(a.icon)},null,2)])):(0,o.Q3)("",!0),(0,o.Lk)("div",so,[(0,o.Lk)("h4",ao,(0,u.v_)(a.title),1),(0,o.Lk)("p",to,[a.loading?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[s[0]||(s[0]=(0,o.Lk)("span",{class:"spinner"},null,-1)),s[1]||(s[1]=(0,o.Lk)("span",{class:"loading-label"},"Cargando...",-1))],64)):null===a.value||""===a.value?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[s[2]||(s[2]=(0,o.Lk)("i",{class:"fas fa-ban no-data-icon"},null,-1)),s[3]||(s[3]=(0,o.Lk)("span",{class:"no-data-text"},"Sin datos",-1))],64)):((0,o.uX)(),(0,o.CE)("span",oo,(0,u.v_)(i.animatedValue),1))])])])}var lo={name:"MetricCard",props:{title:{type:String,required:!0},value:{type:[String,Number,null],default:null},icon:{type:String,default:""},loading:{type:Boolean,default:!1}},data(){return{animatedValue:"",interval:null}},computed:{isLoading(){return this.loading||null===this.value||""===this.value||void 0===this.value}},watch:{value(e){"number"===typeof e?this.startCountAnimation(e):"string"===typeof e&&this.handleStringValue(e)}},mounted(){this.isLoading||("number"===typeof this.value?this.startCountAnimation(this.value):"string"===typeof this.value&&this.handleStringValue(this.value))},methods:{startCountAnimation(e,s=""){clearInterval(this.interval);const a=1e3,t=24,o=a/(1e3/t),i=e/o;let l=0;this.interval=setInterval((()=>{l+=i,l>=e?(clearInterval(this.interval),this.animatedValue=`${Math.round(e).toLocaleString()}${s}`):this.animatedValue=`${Math.round(l).toLocaleString()}${s}`}),1e3/t)},handleStringValue(e){if("string"!==typeof e)return void(this.animatedValue="");const s=e.trim().match(/^(\d+(?:\.\d+)?)(.*)$/);if(s){const a=parseFloat(s[1]),t=s[2]?.trim()||"";isNaN(a)?this.animatedValue=e:this.startCountAnimation(a,t)}else this.animatedValue=e}},beforeUnmount(){clearInterval(this.interval)}};const no=(0,n.A)(lo,[["render",io],["__scopeId","data-v-7df396ef"]]);var ro=no;const co={class:"metric-progress-group"},uo={class:"group-title"},ho={class:"progress-items"},mo={class:"item-header"},po={class:"item-label"},fo={class:"item-value"},go={key:0,class:"skeleton skeleton-text small"},vo={class:"progress-bar"},ko={key:0,class:"skeleton skeleton-bar"},bo={key:2,class:"progress-fill empty"};function wo(e,s,a,t,i,l){return(0,o.uX)(),(0,o.CE)("div",co,[(0,o.Lk)("h4",uo,[a.icon?((0,o.uX)(),(0,o.CE)("i",{key:0,class:(0,u.C4)(a.icon)},null,2)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,u.v_)(a.title),1)]),(0,o.Lk)("div",ho,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.animatedMetrics,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"progress-item",key:t},[(0,o.Lk)("div",mo,[(0,o.Lk)("div",po,[e.icon?((0,o.uX)(),(0,o.CE)("i",{key:0,class:(0,u.C4)(e.icon)},null,2)):(0,o.Q3)("",!0),(0,o.Lk)("span",null,(0,u.v_)(e.label),1)]),(0,o.Lk)("div",fo,[a.loading?((0,o.uX)(),(0,o.CE)("div",go)):l.hasValidValue(e.value)?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,u.v_)(e.displayValue),1)],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:2},[s[0]||(s[0]=(0,o.Lk)("i",{class:"fas fa-ban no-data-icon"},null,-1)),s[1]||(s[1]=(0,o.Lk)("span",{class:"no-data-text"},"Sin datos",-1))],64))])]),(0,o.Lk)("div",vo,[a.loading?((0,o.uX)(),(0,o.CE)("div",ko)):l.hasValidValue(e.value)?((0,o.uX)(),(0,o.CE)("div",{key:1,class:"progress-fill",style:(0,u.Tr)({width:e.animatedWidth})},null,4)):((0,o.uX)(),(0,o.CE)("div",bo))])])))),128))])])}var Lo={name:"MetricProgressGroup",props:{title:{type:String,required:!0},icon:{type:String,default:""},metrics:{type:Array,required:!0},loading:{type:Boolean,default:!1}},data(){return{animatedMetrics:[]}},watch:{metrics:{handler(e){this.loading||this.startAnimation(e)},immediate:!0}},methods:{startAnimation(e){const s=Math.max(...e.map((e=>e.value||0)))||1;this.animatedMetrics=e.map((e=>({...e,displayValue:"",animatedWidth:"0%"}))),this.animatedMetrics.forEach(((e,a)=>{this.animateBoth(a,0,e.value,s,1e3)}))},animateBoth(e,s,a,t,o){const i=performance.now(),l=n=>{const r=n-i,d=Math.min(r/o,1),c=this.easeOutCubic(d),u=Math.floor(s+(a-s)*c),h=a/t*100*c;this.animatedMetrics[e].displayValue=this.formatValue(u),this.animatedMetrics[e].animatedWidth=`${h.toFixed(2)}%`,d<1?requestAnimationFrame(l):(this.animatedMetrics[e].displayValue=this.formatValue(a),this.animatedMetrics[e].animatedWidth=`${(a/t*100).toFixed(2)}%`)};requestAnimationFrame(l)},formatValue(e){return"number"===typeof e?e.toLocaleString():e||"0"},easeOutCubic(e){return 1-Math.pow(1-e,3)},hasValidValue(e){return null!==e&&void 0!==e&&""!==e}}};const Co=(0,n.A)(Lo,[["render",wo],["__scopeId","data-v-5eb37e28"]]);var yo=Co;const Eo={class:"metric-list"},Mo={class:"list-header"},Io={class:"list-title"},xo={class:"list-body"},Fo={class:"item-left"},Do={class:"rank"},To=["title"],So={class:"value"},Ao={key:1,class:"empty-list-state"};function Po(e,s,a,t,i,l){return(0,o.uX)(),(0,o.CE)("div",Eo,[(0,o.Lk)("div",Mo,[a.icon?((0,o.uX)(),(0,o.CE)("i",{key:0,class:(0,u.C4)([a.icon,"list-icon"])},null,2)):(0,o.Q3)("",!0),(0,o.Lk)("h4",Io,(0,u.v_)(a.title),1)]),(0,o.Lk)("div",xo,[a.items.length>0?((0,o.uX)(!0),(0,o.CE)(o.FK,{key:0},(0,o.pI)(a.items,((e,s)=>((0,o.uX)(),(0,o.CE)("li",{key:s,class:"list-item",style:(0,u.Tr)({animationDelay:50*s+"ms"})},[(0,o.Lk)("div",Fo,[(0,o.Lk)("span",Do,"#"+(0,u.v_)(s+1),1),(0,o.Lk)("span",{class:"label",title:e.label},(0,u.v_)(e.label),9,To)]),(0,o.Lk)("span",So,(0,u.v_)(e.value),1)],4)))),128)):((0,o.uX)(),(0,o.CE)("div",Ao,s[0]||(s[0]=[(0,o.Lk)("i",{class:"fas fa-list-ul"},null,-1),(0,o.Lk)("p",{class:"empty-text"},"Sin datos disponibles",-1),(0,o.Lk)("small",{class:"empty-subtext"},"Los elementos aparecerán aquí cuando haya métricas disponibles.",-1)])))])])}var Uo={name:"MetricList",props:{title:{type:String,required:!0},icon:{type:String,default:""},items:{type:Array,default:()=>[]}}};const Xo=(0,n.A)(Uo,[["render",Po],["__scopeId","data-v-12f238e2"]]);var Vo=Xo;const Bo={class:"metric-pie-html"},Oo={key:0,class:"empty-pie"},Ro={class:"pie-chart-wrapper"},Wo={viewBox:"0 0 36 36",class:"pie-chart"},_o={x:"18",y:"20.5",class:"pie-text"},zo={class:"pie-legend"},No={class:"legend-item"},qo={class:"legend-value"},Qo={class:"legend-item"},Go={class:"legend-value"};function jo(e,s,a,t,i,l){return(0,o.uX)(),(0,o.CE)("div",Bo,[l.hasNoData?((0,o.uX)(),(0,o.CE)("div",Oo,s[0]||(s[0]=[(0,o.Lk)("i",{class:"fas fa-chart-pie"},null,-1),(0,o.Lk)("p",{class:"empty-pie-text"},"Sin datos disponibles",-1)]))):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Lk)("div",Ro,[((0,o.uX)(),(0,o.CE)("svg",Wo,[s[1]||(s[1]=(0,o.Lk)("circle",{class:"pie-bg",cx:"18",cy:"18",r:"15.9155"},null,-1)),(0,o.Lk)("circle",{class:"pie-value",cx:"18",cy:"18",r:"15.9155",style:(0,u.Tr)(`--dasharray: ${l.percentage}`)},null,4),(0,o.Lk)("text",_o,(0,u.v_)(l.percentage)+"%",1)]))]),(0,o.Lk)("div",zo,[(0,o.Lk)("div",No,[s[2]||(s[2]=(0,o.Lk)("span",{class:"dot dot-context"},null,-1)),s[3]||(s[3]=(0,o.Lk)("span",null,"Con Contexto",-1)),(0,o.Lk)("span",qo,(0,u.v_)(a.conContexto.toLocaleString()),1)]),(0,o.Lk)("div",Qo,[s[4]||(s[4]=(0,o.Lk)("span",{class:"dot dot-nocontext"},null,-1)),s[5]||(s[5]=(0,o.Lk)("span",null,"Sin Contexto",-1)),(0,o.Lk)("span",Go,(0,u.v_)(l.sinContexto.toLocaleString()),1)])])],64))])}var Ko={name:"MetricPieHTML",props:{total:{type:Number,required:!0},conContexto:{type:Number,required:!0}},computed:{percentage(){const e=this.conContexto/this.total*100;return isNaN(e)?0:Number(e.toFixed(1))},sinContexto(){return this.total-this.conContexto},hasNoData(){return!this.total||0===this.total}}};const Ho=(0,n.A)(Ko,[["render",jo],["__scopeId","data-v-426590dc"]]);var $o=Ho,Jo={name:"GeneralMetrics",components:{MetricCard:ro,MetricProgressGroup:yo,MetricList:Vo,MetricPie:$o},props:{filters:Object,appliedFilters:Object},data(){return{data:{totalMessages:10,avgDuration:12,userMessages:9040,botMessages:11850,deletedMessages:210,deletedChats:38,activeChats:48,successfulResponses:10,emptyResponses:10,generativeUses:1830,intentRate:91,totalDocs:118,totalEmbeddings:4921,topDocs:[{Documento:"Onboarding KIIBOT","Veces Usado":122},{Documento:"Guía de Ventas","Veces Usado":89},{Documento:"FAQ Producto","Veces Usado":72}],topFrags:[{Fragmento:"¿Qué es KIIBOT?","Veces Encontrado":134},{Fragmento:"Política de reembolsos","Veces Encontrado":95},{Fragmento:"Soporte técnico","Veces Encontrado":84}],responseTime:1.7,tokens:6200,deletedBotReplies:37,apiErrors:4}}},mounted(){this.fetchMetrics()},methods:{fetchMetrics(){}}};const Yo=(0,n.A)(Jo,[["render",Yt],["__scopeId","data-v-45d4b204"]]);var Zo=Yo;const ei={class:"user-metrics"},si={class:"metrics-section"},ai={class:"metrics-grid"},ti={class:"metrics-section"},oi={class:"metrics-grid"},ii={class:"metrics-section"},li={class:"metrics-grid"};function ni(e,s,a,t,i,l){const n=(0,o.g2)("MetricCard"),r=(0,o.g2)("MetricList");return(0,o.uX)(),(0,o.CE)("div",ei,[(0,o.Lk)("section",si,[s[0]||(s[0]=(0,o.Lk)("h3",{class:"section-title"},[(0,o.Lk)("i",{class:"fas fa-comments"}),(0,o.eW)(" Actividad del Usuario ")],-1)),(0,o.Lk)("div",ai,[(0,o.bF)(n,{title:"Chats Totales",icon:"fas fa-comment-dots",value:i.data.totalChats},null,8,["value"]),(0,o.bF)(n,{title:"Msj Enviados",icon:"fas fa-paper-plane",value:i.data.userMessages},null,8,["value"]),(0,o.bF)(n,{title:"Respuestas del Bot",icon:"fas fa-robot",value:i.data.botMessages},null,8,["value"]),(0,o.bF)(n,{title:"Chats Eliminados",icon:"fas fa-trash-alt",value:i.data.deletedChats},null,8,["value"]),(0,o.bF)(n,{title:"Msj Eliminados",icon:"fas fa-minus-circle",value:i.data.deletedMessages},null,8,["value"]),(0,o.bF)(n,{title:"Respuestas Bot Eliminadas",icon:"fas fa-robot",value:i.data.deletedBotReplies},null,8,["value"])])]),(0,o.Lk)("section",ti,[s[1]||(s[1]=(0,o.Lk)("h3",{class:"section-title"},[(0,o.Lk)("i",{class:"fas fa-book-open"}),(0,o.eW)(" Uso del Conocimiento ")],-1)),(0,o.Lk)("div",oi,[(0,o.bF)(n,{title:"Consultas a Documentos",icon:"fas fa-search",value:i.data.totalConsultas},null,8,["value"]),(0,o.bF)(n,{title:"Generación de Contenido",icon:"fas fa-pen-nib",value:i.data.generativeUses},null,8,["value"])]),(0,o.bF)(r,{title:"Documentos Más Consultados",icon:"fas fa-file-alt",items:i.data.topDocs.map((e=>({label:e.Documento,value:e["Veces Usado"]})))},null,8,["items"])]),(0,o.Lk)("section",ii,[s[2]||(s[2]=(0,o.Lk)("h3",{class:"section-title"},[(0,o.Lk)("i",{class:"fas fa-chart-line"}),(0,o.eW)(" Comportamiento ")],-1)),(0,o.Lk)("div",li,[(0,o.bF)(n,{title:"Tiempo Prom. entre Msj y Respuesta",icon:"fas fa-stopwatch",value:i.data.responseTime+" seg"},null,8,["value"]),(0,o.bF)(n,{title:"Intención Clara (%)",icon:"fas fa-percentage",value:i.data.intentRate+"%"},null,8,["value"])]),i.data.starredChats&&i.data.starredChats.length?((0,o.uX)(),(0,o.Wv)(r,{key:0,title:"Conversaciones Destacadas",icon:"fas fa-star",items:i.data.starredChats.map((e=>({label:e.titulo,value:e.fecha})))},null,8,["items"])):(0,o.Q3)("",!0)])])}var ri={name:"UserMetrics",components:{MetricCard:ro,MetricList:Vo},props:{userId:String,filters:Object,appliedFilters:Object},data(){return{data:{totalChats:25,userMessages:1130,botMessages:870,deletedChats:4,deletedMessages:90,deletedBotReplies:22,totalConsultas:78,generativeUses:43,topDocs:[{Documento:"Guía de Onboarding","Veces Usado":22},{Documento:"Ventas AI","Veces Usado":16}],responseTime:2.4,intentRate:86,starredChats:[{titulo:"Chat con Cliente A",fecha:"2025-04-03"},{titulo:"Chat de Prueba B",fecha:"2025-04-09"}]}}},mounted(){this.fetchUserMetrics()},methods:{fetchUserMetrics(){}}};const di=(0,n.A)(ri,[["render",ni],["__scopeId","data-v-b2ffacee"]]);var ci=di,ui={name:"MetricsPanel",components:{ModalTime:Tt,ModalDate:zt,GeneralMetrics:Zo,UserMetrics:ci},data(){return{filters:{type:"generales"},users:[{id:"usuario1",name:"Usuario 1"},{id:"usuario2",name:"Usuario 2"},{id:"usuario3",name:"Usuario 3"}],activeModal:null,appliedFilters:{time:null,date:null},showFilterDropdown:!1}},methods:{updateMetrics(){const e=this.appliedFilters.time;e&&(console.log("Final start:",e.start),console.log("Final end:",e.end)),console.log("Updating metrics with filters:",this.filters)},openModal(e){this.activeModal=e},closeModal(){this.activeModal=null},applyTimeFilter(e){const s=this.convertTo24(e.start12h),a=this.convertTo24(e.end12h);this.appliedFilters.time={start:s,end:a,startDisplay:e.start12h,endDisplay:e.end12h,label:e.label||null},this.activeModal=null,this.showFilterDropdown=!0},applyDateFilter(e){this.appliedFilters.date={start:e.start,end:e.end,display:e.display},this.activeModal=null,this.showFilterDropdown=!0},toggleFilterDropdown(){this.showFilterDropdown=!this.showFilterDropdown},clearTimeFilter(){this.appliedFilters.time=null,this.showFilterDropdown=!1},clearDateFilter(){this.appliedFilters.date=null,this.showFilterDropdown=!1},convertTo24(e){const[s,a]=e.split(" ");let[t,o]=s.split(":");return"PM"===a&&"12"!==t&&(t=String(+t+12)),"AM"===a&&"12"===t&&(t="00"),`${t.padStart(2,"0")}:${o}:00`}}};const hi=(0,n.A)(ui,[["render",kt],["__scopeId","data-v-326d0a7b"]]);var mi=hi;const pi={class:"documents-panel"},fi={class:"documents-header"},gi={class:"header-row"},vi={class:"header-filters"},ki={key:0,class:"documents-table"},bi={class:"table"},wi={key:0,class:"fas fa-spinner fa-spin text-blue-500"},Li={class:"actions-cell"},Ci=["onClick"],yi=["onClick"],Ei=["onClick"],Mi={key:1,class:"empty-state"};function Ii(e,s,a,i,l,n){const r=(0,o.g2)("UploadDocument"),d=(0,o.g2)("DeleteConfirm");return(0,o.uX)(),(0,o.CE)("div",pi,[(0,o.Lk)("div",fi,[(0,o.Lk)("div",gi,[s[4]||(s[4]=(0,o.Lk)("h2",{class:"header-title"},[(0,o.eW)(" Documentos "),(0,o.Lk)("span",{class:"txt-blue"},"KIIBOT")],-1)),(0,o.Lk)("button",{onClick:s[0]||(s[0]=(...e)=>n.openAddDocumentModal&&n.openAddDocumentModal(...e)),class:"add-document-btn"},s[3]||(s[3]=[(0,o.Lk)("i",{class:"fas fa-file-upload"},null,-1),(0,o.eW)(" Añadir Documento ")]))]),(0,o.Lk)("div",vi,[(0,o.bo)((0,o.Lk)("input",{type:"text",placeholder:"Buscar por nombre",class:"filter-input","onUpdate:modelValue":s[1]||(s[1]=e=>l.searchQuery=e)},null,512),[[t.Jo,l.searchQuery]])])]),n.filteredDocuments.length>0?((0,o.uX)(),(0,o.CE)("div",ki,[(0,o.Lk)("table",bi,[s[8]||(s[8]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Nombre"),(0,o.Lk)("th",null,"Fecha"),(0,o.Lk)("th",null,"Fragmentos"),(0,o.Lk)("th",null,"Estado"),(0,o.Lk)("th",null,"Acciones")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filteredDocuments,(e=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id},[(0,o.Lk)("td",null,(0,u.v_)(e.name),1),(0,o.Lk)("td",null,(0,u.v_)(e.date),1),(0,o.Lk)("td",null,["En espera"===e.status?((0,o.uX)(),(0,o.CE)("i",wi)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,u.v_)(e.fragments),1)],64))]),(0,o.Lk)("td",null,[(0,o.Lk)("span",{class:(0,u.C4)(["status-badge","Procesado"===e.status?"status-success":"Error"===e.status?"status-error":"status-pending"])},[(0,o.Lk)("i",{class:(0,u.C4)(["fas","Procesado"===e.status?"fa-check-circle":"Error"===e.status?"fa-exclamation-circle":"fa-clock"])},null,2)],2)]),(0,o.Lk)("td",Li,[(0,o.Lk)("button",{class:"action-btn action-view",onClick:s=>n.viewDocument(e)},s[5]||(s[5]=[(0,o.Lk)("i",{class:"fas fa-eye"},null,-1)]),8,Ci),(0,o.Lk)("button",{class:"action-btn action-download",onClick:s=>n.downloadDocument(e)},s[6]||(s[6]=[(0,o.Lk)("i",{class:"fas fa-download"},null,-1)]),8,yi),(0,o.Lk)("button",{class:"action-btn action-delete",onClick:s=>n.deleteDocument(e)},s[7]||(s[7]=[(0,o.Lk)("i",{class:"fas fa-trash-alt"},null,-1)]),8,Ei)])])))),128))])])])):((0,o.uX)(),(0,o.CE)("div",Mi,s[9]||(s[9]=[(0,o.Lk)("div",{class:"empty-icon"},[(0,o.Lk)("i",{class:"fas fa-file-alt"})],-1),(0,o.Lk)("p",{class:"empty-title"},"No se encontraron documentos",-1),(0,o.Lk)("small",{class:"empty-subtext"}," Sube un archivo o ajusta los filtros de búsqueda para visualizar tus documentos aquí. ",-1)]))),l.showUploadModal?((0,o.uX)(),(0,o.Wv)(r,{key:2,onClose:s[2]||(s[2]=e=>l.showUploadModal=!1),onDocumentUploaded:n.handleDocumentUpload},null,8,["onDocumentUploaded"])):(0,o.Q3)("",!0),l.showDeleteModal?((0,o.uX)(),(0,o.Wv)(d,{key:3,document:l.documentToDelete,onCancel:n.cancelDelete,onConfirmDelete:n.confirmDelete},null,8,["document","onCancel","onConfirmDelete"])):(0,o.Q3)("",!0)])}const xi={class:"upload-modal"},Fi={class:"modal-content"},Di={class:"modal-header"},Ti={class:"modal-body"},Si={class:"icon-section"},Ai={class:"file-info"},Pi={key:0,class:"placeholder-text"},Ui={key:0,class:"error-message"},Xi={key:1,class:"progress-bar-wrapper"},Vi={class:"progress-bar-track"},Bi={class:"progress-text"},Oi={key:2,class:"upload-success"},Ri={class:"modal-footer"},Wi=["disabled"];function _i(e,s,a,t,i,l){return(0,o.uX)(),(0,o.CE)("div",xi,[(0,o.Lk)("div",{class:"modal-overlay",onClick:s[0]||(s[0]=s=>e.$emit("close"))}),(0,o.Lk)("div",Fi,[(0,o.Lk)("div",Di,[s[5]||(s[5]=(0,o.Lk)("h2",{class:"modal-title"},[(0,o.Lk)("i",{class:"fas fa-cloud-upload-alt"}),(0,o.Lk)("span",null,"Subir nuevo documento")],-1)),(0,o.Lk)("button",{class:"close-btn",onClick:s[1]||(s[1]=s=>e.$emit("close"))},s[4]||(s[4]=[(0,o.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,o.Lk)("div",Ti,[(0,o.Lk)("label",{class:(0,u.C4)(["file-label",l.fileColorClass]),for:"fileInput"},[(0,o.Lk)("div",Si,[(0,o.Lk)("i",{class:(0,u.C4)(l.fileIconClass)},null,2)]),(0,o.Lk)("div",Ai,[i.selectedFile?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Lk)("strong",null,(0,u.v_)(i.selectedFile.name),1),(0,o.Lk)("small",null,(0,u.v_)(l.readableExtension)+" · "+(0,u.v_)(l.readableSize),1)],64)):((0,o.uX)(),(0,o.CE)("span",Pi," Selecciona un archivo válido "))]),(0,o.Lk)("input",{id:"fileInput",type:"file",onChange:s[2]||(s[2]=(...e)=>l.handleFile&&l.handleFile(...e)),accept:".pdf,.docx,.txt,.xlsx,.csv",hidden:""},null,32)],2),i.errorMessage?((0,o.uX)(),(0,o.CE)("div",Ui,[s[6]||(s[6]=(0,o.Lk)("i",{class:"fas fa-exclamation-circle"},null,-1)),(0,o.eW)(" "+(0,u.v_)(i.errorMessage),1)])):(0,o.Q3)("",!0),i.isUploading?((0,o.uX)(),(0,o.CE)("div",Xi,[(0,o.Lk)("div",Vi,[(0,o.Lk)("div",{class:"progress-bar-fill",style:(0,u.Tr)({width:`${i.uploadProgress}%`})},null,4)]),(0,o.Lk)("small",Bi,"Subiendo documento ("+(0,u.v_)(Math.floor(i.uploadProgress))+"%)",1)])):(0,o.Q3)("",!0),i.uploadSuccess?((0,o.uX)(),(0,o.CE)("div",Oi,s[7]||(s[7]=[(0,o.Lk)("i",{class:"fas fa-check-circle"},null,-1),(0,o.eW)(" Documento subido correctamente ")]))):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ri,[(0,o.Lk)("button",{class:"upload-btn",onClick:s[3]||(s[3]=(...e)=>l.submitUpload&&l.submitUpload(...e)),disabled:!i.selectedFile||i.isUploading},s[8]||(s[8]=[(0,o.Lk)("i",{class:"fas fa-cloud-upload-alt"},null,-1),(0,o.eW)(" Subir Documento ")]),8,Wi)])])])}var zi={name:"UploadDocument",data(){return{selectedFile:null,errorMessage:"",isUploading:!1,uploadProgress:0,uploadSuccess:!1,maxSizeMB:10,fileTypes:{pdf:{icon:"fa-file-pdf",color:"text-red-600",label:"Archivo PDF",class:"file-red"},docx:{icon:"fa-file-word",color:"text-blue-600",label:"Microsoft Word",class:"file-blue"},doc:{icon:"fa-file-word",color:"text-blue-600",label:"Microsoft Word",class:"file-blue"},txt:{icon:"fa-file-alt",color:"text-gray-600",label:"Texto plano",class:"file-gray"},xlsx:{icon:"fa-file-excel",color:"text-green-600",label:"Excel",class:"file-green"},csv:{icon:"fa-file-excel",color:"text-green-600",label:"CSV",class:"file-green"}}}},computed:{fileExtension(){return this.selectedFile?.name.split(".").pop().toLowerCase()||""},fileData(){return this.fileTypes[this.fileExtension]||{icon:"fa-file",color:"text-gray-400",label:"Desconocido",class:"file-default"}},fileIconClass(){return`fas ${this.fileData.icon} ${this.fileData.color}`},fileColorClass(){return this.fileData.class},readableExtension(){return this.fileData.label},readableSize(){if(!this.selectedFile)return"";const e=this.selectedFile.size/1024;return e>1024?`${(e/1024).toFixed(2)} MB`:`${e.toFixed(1)} KB`}},methods:{handleFile(e){const s=e.target.files[0];if(this.errorMessage="",this.selectedFile=null,!s)return;const a=s.name.split(".").pop().toLowerCase(),t=s.size/1048576;Object.keys(this.fileTypes).includes(a)?t>this.maxSizeMB?this.errorMessage=`El archivo supera los ${this.maxSizeMB}MB permitidos`:this.selectedFile=s:this.errorMessage=`Formato no soportado: .${a}`},submitUpload(){if(!this.selectedFile||this.isUploading)return;this.isUploading=!0,this.errorMessage="",this.uploadSuccess=!1,this.uploadProgress=0;const e=setInterval((()=>{if(this.uploadProgress>=100){clearInterval(e),this.isUploading=!1,this.uploadSuccess=!0;const s={id:Date.now(),name:this.selectedFile.name,date:(new Date).toISOString().slice(0,10),fragments:Math.floor(30*Math.random())+5,status:"En espera"};this.$emit("document-uploaded",s),setTimeout((()=>{this.$emit("close")}),1200)}else this.uploadProgress=Math.min(this.uploadProgress+10*Math.random(),100)}),150)}}};const Ni=(0,n.A)(zi,[["render",_i],["__scopeId","data-v-730015d0"]]);var qi=Ni;const Qi={class:"delete-modal"},Gi={class:"modal-content"},ji={class:"modal-header"},Ki={class:"modal-body"},Hi={class:"main-text"},$i={class:"doc-name"},Ji=["placeholder"],Yi={key:0,class:"error-message"},Zi={class:"modal-footer"},el=["disabled"],sl={key:0,class:"fas fa-trash-alt"},al={key:1,class:"fas fa-spinner fa-spin"};function tl(e,s,a,i,l,n){return(0,o.uX)(),(0,o.CE)("div",Qi,[(0,o.Lk)("div",{class:"modal-overlay",onClick:s[0]||(s[0]=s=>e.$emit("cancel"))}),(0,o.Lk)("div",Gi,[(0,o.Lk)("div",ji,[s[5]||(s[5]=(0,o.Lk)("h2",{class:"modal-title"},[(0,o.Lk)("i",{class:"fas fa-exclamation-triangle"}),(0,o.eW)(" Confirmar eliminación ")],-1)),(0,o.Lk)("button",{class:"close-btn",onClick:s[1]||(s[1]=s=>e.$emit("cancel"))},s[4]||(s[4]=[(0,o.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,o.Lk)("div",Ki,[(0,o.Lk)("p",Hi,[s[6]||(s[6]=(0,o.eW)(" Estás a punto de eliminar permanentemente el documento ")),(0,o.Lk)("span",$i,(0,u.v_)(a.document.name),1),s[7]||(s[7]=(0,o.Lk)("br",null,null,-1)),s[8]||(s[8]=(0,o.eW)(" Se eliminarán todos los fragmentos de conocimiento relacionados y ")),s[9]||(s[9]=(0,o.Lk)("strong",null,"KIIBOT olvidará su información.",-1)),s[10]||(s[10]=(0,o.Lk)("br",null,null,-1)),s[11]||(s[11]=(0,o.Lk)("span",{class:"warning"},"Esta acción no se puede deshacer.",-1))]),s[13]||(s[13]=(0,o.Lk)("label",{for:"confirm-input",class:"confirm-label"}," Escribe el nombre del archivo para confirmar: ",-1)),(0,o.bo)((0,o.Lk)("input",{id:"confirm-input",type:"text","onUpdate:modelValue":s[2]||(s[2]=e=>l.confirmInput=e),placeholder:a.document.name,class:"confirm-input"},null,8,Ji),[[t.Jo,l.confirmInput]]),l.errorMessage?((0,o.uX)(),(0,o.CE)("div",Yi,[s[12]||(s[12]=(0,o.Lk)("i",{class:"fas fa-exclamation-circle"},null,-1)),(0,o.eW)(" "+(0,u.v_)(l.errorMessage),1)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Zi,[(0,o.Lk)("button",{class:"delete-btn",disabled:!n.canDelete||l.isDeleting,onClick:s[3]||(s[3]=(...e)=>n.confirmDeletion&&n.confirmDeletion(...e))},[l.isDeleting?((0,o.uX)(),(0,o.CE)("i",al)):((0,o.uX)(),(0,o.CE)("i",sl)),s[14]||(s[14]=(0,o.eW)(" Eliminar "))],8,el)])])])}var ol={name:"DeleteConfirm",props:{document:{type:Object,required:!0}},data(){return{confirmInput:"",errorMessage:"",isDeleting:!1}},computed:{canDelete(){return this.confirmInput.trim()===this.document.name}},methods:{confirmDeletion(){this.canDelete?(this.errorMessage="",this.isDeleting=!0,setTimeout((()=>{this.$emit("confirm-delete",this.document),this.confirmInput="",this.isDeleting=!1,this.$emit("close")}),1200)):this.errorMessage="El nombre no coincide exactamente con el archivo."}},watch:{document(){this.confirmInput="",this.errorMessage="",this.isDeleting=!1}}};const il=(0,n.A)(ol,[["render",tl],["__scopeId","data-v-6926a633"]]);var ll=il,nl={name:"DocumentsPanel",components:{UploadDocument:qi,DeleteConfirm:ll},data(){return{searchQuery:"",showUploadModal:!1,showDeleteModal:!1,documentToDelete:null,documents:[{id:1,name:"Manual_KIIBOT.pdf",date:"2025-04-10",fragments:23,status:"Procesado"},{id:2,name:"Ventas_Q1.txt",date:"2025-04-09",fragments:0,status:"Error"},{id:3,name:"FAQs_KIIBOT.docx",date:"2025-04-08",fragments:15,status:"En espera"}]}},computed:{filteredDocuments(){const e=this.searchQuery.toLowerCase();return this.documents.filter((s=>s.name.toLowerCase().includes(e)||s.user.toLowerCase().includes(e)||s.status.toLowerCase().includes(e)))}},methods:{openAddDocumentModal(){this.showUploadModal=!0},handleDocumentUpload(e){this.documents.unshift(e)},viewDocument(e){console.log("Ver documento:",e.name)},downloadDocument(e){console.log("Descargar documento:",e.name)},deleteDocument(e){this.documentToDelete=e,this.showDeleteModal=!0},confirmDelete(){this.documents=this.documents.filter((e=>e.id!==this.documentToDelete.id)),this.showDeleteModal=!1,this.documentToDelete=null},cancelDelete(){this.showDeleteModal=!1,this.documentToDelete=null}}};const rl=(0,n.A)(nl,[["render",Ii],["__scopeId","data-v-560df71a"]]);var dl=rl;const cl={class:"knowledge-panel"},ul={class:"knowledge-header"},hl={class:"header-filters"},ml=["value"],pl={class:"knowledge-table"},fl={key:0,class:"table"},gl=["onClick","title"],vl={class:"col-fecha"},kl={class:"actions-cell"},bl=["onClick"],wl={key:1,class:"empty-state"};function Ll(e,s,a,i,l,n){const r=(0,o.g2)("EditFragmentModal");return(0,o.uX)(),(0,o.CE)("div",cl,[(0,o.Lk)("div",ul,[s[3]||(s[3]=(0,o.Lk)("div",{class:"header-row"},[(0,o.Lk)("h2",{class:"header-title"},[(0,o.eW)(" Base de Conocimiento "),(0,o.Lk)("span",{class:"txt-blue"},"KIIBOT")])],-1)),(0,o.Lk)("div",hl,[(0,o.bo)((0,o.Lk)("input",{type:"text",placeholder:"Buscar por palabra o frase...",class:"filter-input","onUpdate:modelValue":s[0]||(s[0]=e=>l.searchQuery=e)},null,512),[[t.Jo,l.searchQuery]]),(0,o.bo)((0,o.Lk)("select",{class:"filter-select","onUpdate:modelValue":s[1]||(s[1]=e=>l.selectedDocument=e)},[s[2]||(s[2]=(0,o.Lk)("option",{value:""},"Todos los documentos",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.availableDocuments,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,u.v_)(e),9,ml)))),128))],512),[[t.u1,l.selectedDocument]])])]),(0,o.Lk)("div",pl,[n.filteredFragments.length>0?((0,o.uX)(),(0,o.CE)("table",fl,[s[5]||(s[5]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Fragmento"),(0,o.Lk)("th",null,"Documento"),(0,o.Lk)("th",{class:"col-fecha"},"Fecha"),(0,o.Lk)("th",null,"Estado"),(0,o.Lk)("th",null,"Acciones")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filteredFragments,(e=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id,class:(0,u.C4)({expanded:l.expandedIds.includes(e.id)})},[(0,o.Lk)("td",null,[(0,o.Lk)("div",{class:(0,u.C4)(["fragment-text",{expanded:l.expandedIds.includes(e.id)}])},[(0,o.Lk)("span",null,(0,u.v_)(e.text),1),n.shouldShowToggle(e.text)?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"readmore-btn",onClick:s=>n.toggleFragment(e.id),title:l.expandedIds.includes(e.id)?"Ocultar":"Ver completo"},[(0,o.Lk)("i",{class:(0,u.C4)(l.expandedIds.includes(e.id)?"fas fa-eye-slash":"fas fa-eye")},null,2)],8,gl)):(0,o.Q3)("",!0)],2)]),(0,o.Lk)("td",null,(0,u.v_)(e.document),1),(0,o.Lk)("td",vl,(0,u.v_)(e.date),1),(0,o.Lk)("td",null,[(0,o.Lk)("span",{class:(0,u.C4)(["status-chip",e.was_edited?"edited":"original"])},[(0,o.Lk)("i",{class:(0,u.C4)(["fas",e.was_edited?"fa-edit":"fa-file-alt"])},null,2)],2)]),(0,o.Lk)("td",kl,[(0,o.Lk)("button",{class:"action-btn action-edit",onClick:s=>n.editFragment(e)},s[4]||(s[4]=[(0,o.Lk)("i",{class:"fas fa-pen"},null,-1)]),8,bl)])],2)))),128))])])):((0,o.uX)(),(0,o.CE)("div",wl,s[6]||(s[6]=[(0,o.Lk)("div",{class:"empty-icon"},[(0,o.Lk)("i",{class:"fas fa-folder-open"})],-1),(0,o.Lk)("p",{class:"empty-title"},"No hay fragmentos disponibles",-1),(0,o.Lk)("small",{class:"empty-subtext"}," Ajusta los filtros o carga un documento procesado para ver los fragmentos aquí. ",-1)])))]),l.showEditModal?((0,o.uX)(),(0,o.Wv)(r,{key:0,fragment:l.fragmentBeingEdited,onClose:n.closeEditModal,onSave:n.handleFragmentSave},null,8,["fragment","onClose","onSave"])):(0,o.Q3)("",!0)])}a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);const Cl={class:"edit-fragment-modal",open:""},yl={class:"textarea-wrapper"},El={class:"char-count"},Ml={key:0,class:"form-error"},Il={key:1,class:"form-success"},xl={class:"modal-actions"};function Fl(e,s,a,i,l,n){return(0,o.uX)(),(0,o.CE)("dialog",Cl,[(0,o.Lk)("form",{onSubmit:s[2]||(s[2]=(0,t.D$)(((...e)=>n.handleSave&&n.handleSave(...e)),["prevent"])),class:"modal-content"},[s[5]||(s[5]=(0,o.Lk)("h2",{class:"modal-title"},[(0,o.Lk)("i",{class:"fas fa-pen"}),(0,o.eW)(" Editar Fragmento ")],-1)),s[6]||(s[6]=(0,o.Lk)("p",{class:"modal-subtitle"},"Modifica el contenido del fragmento seleccionado",-1)),(0,o.Lk)("div",yl,[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":s[0]||(s[0]=e=>l.editedText=e),placeholder:"Edita el texto del fragmento...",class:(0,u.C4)({error:l.showError})},null,2),[[t.Jo,l.editedText]]),(0,o.Lk)("small",El,(0,u.v_)(l.editedText.length)+" caracteres",1)]),l.showError?((0,o.uX)(),(0,o.CE)("p",Ml,"El fragmento no puede estar vacío")):(0,o.Q3)("",!0),l.showSuccess?((0,o.uX)(),(0,o.CE)("p",Il,"Fragmento guardado exitosamente.")):(0,o.Q3)("",!0),(0,o.Lk)("div",xl,[(0,o.Lk)("button",{type:"button",class:"cancel-btn",onClick:s[1]||(s[1]=s=>e.$emit("close"))},s[3]||(s[3]=[(0,o.Lk)("i",{class:"fas fa-times"},null,-1),(0,o.eW)(" Cancelar ")])),s[4]||(s[4]=(0,o.Lk)("button",{type:"submit",class:"confirm-btn"},[(0,o.Lk)("i",{class:"fas fa-save"}),(0,o.eW)(" Guardar Cambios ")],-1))])],32)])}var Dl={name:"EditFragmentModal",props:{fragment:{type:Object,required:!0}},data(){return{editedText:this.fragment.text,showError:!1,showSuccess:!1}},watch:{editedText(e){this.showError=""===e.trim(),this.showSuccess&&(this.showSuccess=!1)}},methods:{handleSave(){const e=this.editedText.trim();if(""===e)return this.showError=!0,void(this.showSuccess=!1);this.showSuccess=!0,this.showError=!1,this.$emit("save",{...this.fragment,text:e}),setTimeout((()=>{this.$emit("close")}),1800)}}};const Tl=(0,n.A)(Dl,[["render",Fl],["__scopeId","data-v-30171962"]]);var Sl=Tl,Al={name:"BaseConocimiento",components:{EditFragmentModal:Sl},data(){return{searchQuery:"",selectedDocument:"",showEditModal:!1,fragmentBeingEdited:null,expandedIds:[],fragments:[{id:1,text:"Yo ofrezco esnudas, vírgenes, intactas y sencillas, para mis delicias y el placer de mis amigos, estas noches árabes vividas, soñadas y traducidas sobre su tierra natal y sobre el agua Ellas me fueron dulces durante los ocios en remotos mares, bajo un cielo ahora lejano. Por eso las doy. Sencillas, sonrientes y llenas de ingenuidad, como la musulmana Schehrazada, su madre suculenta que las dió a luz en el misterio; fermentando con emoción en los brazos de un príncipe sublime —lúbrico y feroz—, bajo la mirada enternecida de Alah, clemente y misericordioso. Al venir al mundo fueron delicadamente mecidas por las manos de la lustral Doniazada, su buena tía, que grabó sus nombres sobre hojas de oro coloreadas de húmedas pedrerías y las cuidó bajo el terciopelo de sus pupilas hasta la adolescencia dura, para esparcirlas después, voluptuosas y libres, sobre el mundo oriental, eternizado por su sonrisa. Yo os las entrego tales como son, en su frescor de carne y de rosa. Sólo existe un método honrado y lógico de traducción: la «literalidad», una literalidad impersonal, apenas atenuada por un leve parpadeo y una ligera sonrisa del traductor. Ella crea, sugestiva, la más grande potencia literaria. Ella produce el placer de la evocación. Ella es la garantía de la verdad. Ella es firme e inmutable, en su desnudez de piedra. Ella cautiva el aroma primitivo y lo cristaliza. Ella separa y desata... Ella fija. La literalidad encadena el espíritu divagador y lo doma, al mismo tiempo que detiene la infernal facilidad de la pluma. Yo me felicito de que así sea; porque ¿dónde encontrar un traductor de genio simple, anónimo, libre de la necia manía de su renombre?...",document:"manual_kiibot.pdf",date:"2025-04-10",was_edited:!1},{id:2,text:"Los usuarios pueden interactuar con el bot mediante comandos personalizados...",document:"faq_general.docx",date:"2025-04-09",was_edited:!0},{id:3,text:"Para acceder a las configuraciones avanzadas, dirígete al panel de administrador...",document:"manual_admin.pdf",date:"2025-04-08",was_edited:!1}]}},computed:{availableDocuments(){const e=this.fragments.map((e=>e.document));return[...new Set(e)]},filteredFragments(){return this.fragments.filter((e=>{const s=e.text.toLowerCase().includes(this.searchQuery.toLowerCase()),a=""===this.selectedDocument||e.document===this.selectedDocument;return s&&a}))}},methods:{editFragment(e){this.fragmentBeingEdited={...e},this.showEditModal=!0},closeEditModal(){this.fragmentBeingEdited=null,this.showEditModal=!1},handleFragmentSave(e){const s=this.fragments.findIndex((s=>s.id===e.id));-1!==s&&(this.fragments[s]={...e,was_edited:!0,date:(new Date).toISOString().slice(0,10)})},toggleFragment(e){const s=this.expandedIds.indexOf(e);-1===s?this.expandedIds.push(e):this.expandedIds.splice(s,1)},shouldShowToggle(e){return e.length>180}}};const Pl=(0,n.A)(Al,[["render",Ll],["__scopeId","data-v-708b23c5"]]);var Ul=Pl,Xl=a.p+"img/inicio.25044f47.webp";const Vl={class:"chat-new-container"},Bl={class:"chat-new-content"};function Ol(e,s,a,t,i,l){const n=(0,o.g2)("MessageInput");return(0,o.uX)(),(0,o.CE)("div",Vl,[(0,o.Lk)("div",Bl,[s[0]||(s[0]=(0,o.Fv)('<div class="chat-image" data-v-5a05c364><img src="'+Xl+'" alt="KIIBOT" loading="lazy" data-v-5a05c364></div><div class="chat-text" data-v-5a05c364><h1 class="chat-new-title" data-v-5a05c364><span class="highlight" data-v-5a05c364>KIIBOT</span> te acompaña en lo que necesites </h1></div>',2)),(0,o.bF)(n,{class:"input-new",onSend:l.handleSendMessage},null,8,["onSend"])])])}var Rl={components:{MessageInput:xs},methods:{handleSendMessage(e){console.log("Mensaje enviado desde input:",e)}}};const Wl=(0,n.A)(Rl,[["render",Ol],["__scopeId","data-v-5a05c364"]]);var _l=Wl;const zl=[{path:"/",redirect:"/login"},{path:"/login",component:E},{path:"/",component:be,meta:{requiresAuth:!0},children:[{path:"home",name:"Home",component:Ye},{path:"chat/new",name:"ChatNew",component:_l},{path:"chat/:id",name:"Chat",component:Us},{path:"backoffice",name:"BackOffice",component:Ws,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"users",name:"UserManagement",component:nt},{path:"metrics",name:"MetricsPanel",component:mi},{path:"documents",name:"DocumentsPanel",component:dl},{path:"embeddings",name:"KnowledgeBase",component:Ul}]},{path:"/:catchAll(.*)",redirect:"/home"}],Nl=(0,c.aE)({history:(0,c.Bt)(),routes:zl});Nl.beforeEach(((e,s,a)=>{const t=!!localStorage.getItem("token"),o=localStorage.getItem("role");e.meta.requiresAuth&&!t?a("/login"):"/login"===e.path&&t||e.meta.requiresAdmin&&"admin"!==o?a("/home"):a()}));var ql=Nl;window.__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1;const Ql=(0,t.Ef)(d);Ql.use(ql),Ql.mount("#app")}},s={};function a(t){var o=s[t];if(void 0!==o)return o.exports;var i=s[t]={exports:{}};return e[t].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(s,t,o,i){if(!t){var l=1/0;for(c=0;c<e.length;c++){t=e[c][0],o=e[c][1],i=e[c][2];for(var n=!0,r=0;r<t.length;r++)(!1&i||l>=i)&&Object.keys(a.O).every((function(e){return a.O[e](t[r])}))?t.splice(r--,1):(n=!1,i<l&&(l=i));if(n){e.splice(c--,1);var d=o();void 0!==d&&(s=d)}}return s}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[t,o,i]}}(),function(){a.d=function(e,s){for(var t in s)a.o(s,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){a.p="/kiibot-frontend/"}(),function(){var e={524:0};a.O.j=function(s){return 0===e[s]};var s=function(s,t){var o,i,l=t[0],n=t[1],r=t[2],d=0;if(l.some((function(s){return 0!==e[s]}))){for(o in n)a.o(n,o)&&(a.m[o]=n[o]);if(r)var c=r(a)}for(s&&s(t);d<l.length;d++)i=l[d],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},t=self["webpackChunkkiibot_frontend"]=self["webpackChunkkiibot_frontend"]||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))}();var t=a.O(void 0,[504],(function(){return a(4710)}));t=a.O(t)})();
//# sourceMappingURL=app.299b1046.js.map